(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{spcp:function(l,n,e){"use strict";e.r(n);var t=e("CcnG"),u=function(){},i=e("pMnS"),o=e("su9b"),r=e("NRJC"),s=e("ZYCi"),a=function(){},c=t.Qa({encapsulation:0,styles:[[""]],data:{}});function p(l){return t.kb(0,[(l()(),t.Sa(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),t.Ra(1,212992,null,0,s.s,[s.b,t.R,t.k,[8,null],t.i],null,null)],function(l,n){l(n,1,0)},null)}var b=t.Oa("app-iot-services",a,function(l){return t.kb(0,[(l()(),t.Sa(0,0,null,null,1,"app-iot-services",[],null,null,null,p,c)),t.Ra(1,49152,null,0,a,[],null,null)],null,null)},{},{},[]),d=e("gIcY"),g=e("Ip0R"),v=e("y20U"),f=e("vVzn"),h=e("yGQT"),m=e("vzdd"),y=e("67Y/"),O=e("t9fZ"),S=e("LEi9"),j=function(){return(j=Object.assign||function(l){for(var n,e=1,t=arguments.length;e<t;e++)for(var u in n=arguments[e])Object.prototype.hasOwnProperty.call(n,u)&&(l[u]=n[u]);return l}).apply(this,arguments)},C={services:[],selectedService:null,serviceOntology:[],loading:!1};function x(l,n){switch(void 0===l&&(l=C),n.type){case S.C:return j({},l,{services:n.payload.slice()});case S.B:return j({},l,{selectedService:n.payload});case S.J:return j({},l,{selectedService:null});case S.I:var e=j({},l.selectedService,n.payload);return j({},l,{selectedService:e});case S.G:return j({},l,{services:l.services.concat([n.payload]),selectedService:n.payload});case S.H:var t=l.services.slice().filter(function(l){return l.id!==n.payload});return j({},l,{services:t,selectedService:null});case S.P:var u=l.services.find(function(l){return l.id===n.payload.service_id}),i=j({},u,{service_is_running:n.payload.status});return-1!==(r=(o=l.services.slice()).indexOf(u))&&(o[r]=i),j({},l,{services:o});case S.a:return j({},l,{loading:!0});case S.b:var o,r;return u=l.services.find(function(l){return l.id===n.payload.service_id}),i=j({},u,{service_image_built:n.payload.success}),-1!==(r=(o=l.services.slice()).indexOf(u))&&(o[r]=i),j({},l,{services:o});case S.v:return j({},l,{loading:!1});case S.D:return j({},l,{serviceOntology:n.payload});case S.d:return j({},l,{services:[],selectedService:null,serviceOntology:[]});default:return l}}var w=Object(h.B)("services"),k=Object(h.D)(w,function(l){return l.services}),_=Object(h.D)(w,function(l){return l.serviceOntology}),T=Object(h.D)(w,function(l){return l.loading}),R=e("F90I"),I=e("OAz9"),P=function(){function l(l,n){this.router=l,this.store=n,this.searchType="topic",this.embeddingComponent="NewService",this.service_types=["Actuator","Sensor","Processor"],this.showTopicState={inputs:!1,outputs:!1,existing_inputs:!1}}return l.prototype.ngOnInit=function(){this.servicesOntologyOpened(),this.topicOntologyOpened(),this.initForm()},l.prototype.topicOntologyOpened=function(){var l=this;this.store.pipe(Object(h.E)(R.b),Object(O.a)(1),Object(y.a)(function(l){return l.sort()})).subscribe(function(n){l.topicsOntology=n,0===l.topicsOntology.length&&l.store.dispatch(new I.i)})},l.prototype.servicesOntologyOpened=function(){var l=this;this.store.pipe(Object(h.E)(_),Object(O.a)(1),Object(y.a)(function(l){return l.sort()})).subscribe(function(n){l.serviceOntology=n,0===l.serviceOntology.length&&l.store.dispatch(new S.r)})},l.prototype.getOntology=function(){this.store.dispatch(new S.r)},l.prototype.initForm=function(){var l=new d.g([]),n=new d.g([]);this.IoTServiceForm=new d.l({name:new d.j(null,d.B.required),description:new d.j(null,d.B.required),serviceType:new d.j(null,d.B.required),serviceOntology:new d.j(null,d.B.required),location:new d.j(null,d.B.required),inputTopics:l,outputTopics:n})},l.prototype.onShowTopicsChange=function(l){switch(l){case 1:this.showTopicState={inputs:!0,outputs:!1,existing_inputs:!1};break;case 2:this.showTopicState={inputs:!1,outputs:!0,existing_inputs:!1};break;case 3:this.showTopicState={inputs:!0,outputs:!0,existing_inputs:!1};break;case 4:this.showTopicState={inputs:!1,outputs:!1,existing_inputs:!1};break;case 5:this.showTopicState={inputs:!0,outputs:!1,existing_inputs:!0}}},l.prototype.onAddInputTopic=function(){this.IoTServiceForm.get("inputTopics").push(new d.l({name:new d.j(null),description:new d.j(null,d.B.required),topic_ontology:new d.j(null,d.B.required)}))},l.prototype.onDeleteInputTopic=function(l){this.IoTServiceForm.get("inputTopics").removeAt(l)},l.prototype.onAddOutputTopic=function(){this.IoTServiceForm.get("outputTopics").push(new d.l({name:new d.j(null),description:new d.j(null,d.B.required),topic_ontology:new d.j(null,d.B.required)}))},l.prototype.onDeleteOutputTopic=function(l){this.IoTServiceForm.get("outputTopics").removeAt(l)},l.prototype.onAddExistingInputTopic=function(l){this.IoTServiceForm.get("inputTopics").push(new d.l({name:new d.j(l.name),description:new d.j(l.description,d.B.required),topic_ontology:new d.j(l.topic_ontology,d.B.required)})),this.onShowTopicsChange(1)},l.prototype.getControls=function(l){return this.IoTServiceForm.get(l).controls},l.prototype.onCancel=function(){this.router.navigate(["services"])},l.prototype.onSubmit=function(){var l=new function(l,n,e,t,u){this.name=l,this.description=n,this.service_type=e,this.service_ontology=t,this.location=u}(this.IoTServiceForm.value.name,this.IoTServiceForm.value.description,this.IoTServiceForm.value.serviceType,this.IoTServiceForm.value.serviceOntology,this.IoTServiceForm.value.location);l.input_topics=this.IoTServiceForm.value.inputTopics,l.output_topics=this.IoTServiceForm.value.outputTopics,this.store.dispatch(new S.f(l))},l}(),F=t.Qa({encapsulation:0,styles:[["input.ng-invalid.ng-touched[_ngcontent-%COMP%], textarea.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}"]],data:{}});function D(l){return t.kb(0,[(l()(),t.Sa(0,0,null,null,3,"option",[],null,null,null,null,null)),t.Ra(1,147456,null,0,d.x,[t.l,t.F,[2,d.A]],{value:[0,"value"]},null),t.Ra(2,147456,null,0,d.G,[t.l,t.F,[8,null]],{value:[0,"value"]},null),(l()(),t.ib(3,null,["",""]))],function(l,n){l(n,1,0,n.context.$implicit),l(n,2,0,n.context.$implicit)},function(l,n){l(n,3,0,n.context.$implicit)})}function U(l){return t.kb(0,[(l()(),t.Sa(0,0,null,null,3,"option",[],null,null,null,null,null)),t.Ra(1,147456,null,0,d.x,[t.l,t.F,[2,d.A]],{value:[0,"value"]},null),t.Ra(2,147456,null,0,d.G,[t.l,t.F,[8,null]],{value:[0,"value"]},null),(l()(),t.ib(3,null,["",""]))],function(l,n){l(n,1,0,n.context.$implicit),l(n,2,0,n.context.$implicit)},function(l,n){l(n,3,0,n.context.$implicit)})}function A(l){return t.kb(0,[(l()(),t.Sa(0,0,null,null,3,"option",[],null,null,null,null,null)),t.Ra(1,147456,null,0,d.x,[t.l,t.F,[2,d.A]],{value:[0,"value"]},null),t.Ra(2,147456,null,0,d.G,[t.l,t.F,[8,null]],{value:[0,"value"]},null),(l()(),t.ib(3,null,["",""]))],function(l,n){l(n,1,0,n.context.$implicit),l(n,2,0,n.context.$implicit)},function(l,n){l(n,3,0,n.context.$implicit)})}function $(l){return t.kb(0,[(l()(),t.Sa(0,0,null,null,34,"div",[["class","row"],["style","margin-top: 10px;"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),t.Ra(1,212992,null,0,d.n,[[3,d.d],[8,null],[8,null]],{name:[0,"name"]},null),t.fb(2048,null,d.d,null,[d.n]),t.Ra(3,16384,null,0,d.u,[[4,d.d]],null,null),(l()(),t.Sa(4,0,null,null,6,"div",[["class","col-xs-2"]],null,null,null,null,null)),(l()(),t.Sa(5,0,null,null,5,"input",[["class","form-control"],["formControlName","name"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t.bb(l,6)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t.bb(l,6).onTouched()&&u),"compositionstart"===n&&(u=!1!==t.bb(l,6)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t.bb(l,6)._compositionEnd(e.target.value)&&u),u},null,null)),t.Ra(6,16384,null,0,d.e,[t.F,t.l,[2,d.a]],null,null),t.fb(1024,null,d.r,function(l){return[l]},[d.e]),t.Ra(8,671744,null,0,d.k,[[3,d.d],[8,null],[8,null],[6,d.r],[2,d.F]],{name:[0,"name"]},null),t.fb(2048,null,d.s,null,[d.k]),t.Ra(10,16384,null,0,d.t,[[4,d.s]],null,null),(l()(),t.Sa(11,0,null,null,6,"div",[["class","col-xs-6"]],null,null,null,null,null)),(l()(),t.Sa(12,0,null,null,5,"input",[["class","form-control"],["formControlName","description"],["rows","3"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t.bb(l,13)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t.bb(l,13).onTouched()&&u),"compositionstart"===n&&(u=!1!==t.bb(l,13)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t.bb(l,13)._compositionEnd(e.target.value)&&u),u},null,null)),t.Ra(13,16384,null,0,d.e,[t.F,t.l,[2,d.a]],null,null),t.fb(1024,null,d.r,function(l){return[l]},[d.e]),t.Ra(15,671744,null,0,d.k,[[3,d.d],[8,null],[8,null],[6,d.r],[2,d.F]],{name:[0,"name"]},null),t.fb(2048,null,d.s,null,[d.k]),t.Ra(17,16384,null,0,d.t,[[4,d.s]],null,null),(l()(),t.Sa(18,0,null,null,13,"div",[["class","col-xs-2"]],null,null,null,null,null)),(l()(),t.Sa(19,0,null,null,12,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.Sa(20,0,null,null,11,"select",[["class","form-control"],["formControlName","topic_ontology"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"focus"],[null,"change"],[null,"blur"]],function(l,n,e){var u=!0,i=l.component;return"change"===n&&(u=!1!==t.bb(l,21).onChange(e.target.value)&&u),"blur"===n&&(u=!1!==t.bb(l,21).onTouched()&&u),"focus"===n&&(u=!1!==i.topicOntologyOpened()&&u),u},null,null)),t.Ra(21,16384,null,0,d.A,[t.F,t.l],null,null),t.fb(1024,null,d.r,function(l){return[l]},[d.A]),t.Ra(23,671744,null,0,d.k,[[3,d.d],[8,null],[8,null],[6,d.r],[2,d.F]],{name:[0,"name"]},null),t.fb(2048,null,d.s,null,[d.k]),t.Ra(25,16384,null,0,d.t,[[4,d.s]],null,null),(l()(),t.Sa(26,0,null,null,3,"option",[["selected",""],["style","color: lightgray"],["value",""]],null,null,null,null,null)),t.Ra(27,147456,null,0,d.x,[t.l,t.F,[2,d.A]],{value:[0,"value"]},null),t.Ra(28,147456,null,0,d.G,[t.l,t.F,[8,null]],{value:[0,"value"]},null),(l()(),t.ib(-1,null,["no ontology selected"])),(l()(),t.Ja(16777216,null,null,1,null,A)),t.Ra(31,278528,null,0,g.j,[t.R,t.O,t.u],{ngForOf:[0,"ngForOf"]},null),(l()(),t.Sa(32,0,null,null,2,"div",[["class","col-xs-2"]],null,null,null,null,null)),(l()(),t.Sa(33,0,null,null,1,"button",[["class","btn btn-danger"],["type","button"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onDeleteInputTopic(l.context.index)&&t),t},null,null)),(l()(),t.ib(-1,null,["X"]))],function(l,n){var e=n.component;l(n,1,0,n.context.index),l(n,8,0,"name"),l(n,15,0,"description"),l(n,23,0,"topic_ontology"),l(n,27,0,""),l(n,28,0,""),l(n,31,0,e.topicsOntology)},function(l,n){l(n,0,0,t.bb(n,3).ngClassUntouched,t.bb(n,3).ngClassTouched,t.bb(n,3).ngClassPristine,t.bb(n,3).ngClassDirty,t.bb(n,3).ngClassValid,t.bb(n,3).ngClassInvalid,t.bb(n,3).ngClassPending),l(n,5,0,t.bb(n,10).ngClassUntouched,t.bb(n,10).ngClassTouched,t.bb(n,10).ngClassPristine,t.bb(n,10).ngClassDirty,t.bb(n,10).ngClassValid,t.bb(n,10).ngClassInvalid,t.bb(n,10).ngClassPending),l(n,12,0,t.bb(n,17).ngClassUntouched,t.bb(n,17).ngClassTouched,t.bb(n,17).ngClassPristine,t.bb(n,17).ngClassDirty,t.bb(n,17).ngClassValid,t.bb(n,17).ngClassInvalid,t.bb(n,17).ngClassPending),l(n,20,0,t.bb(n,25).ngClassUntouched,t.bb(n,25).ngClassTouched,t.bb(n,25).ngClassPristine,t.bb(n,25).ngClassDirty,t.bb(n,25).ngClassValid,t.bb(n,25).ngClassInvalid,t.bb(n,25).ngClassPending)})}function E(l){return t.kb(0,[(l()(),t.Sa(0,0,null,null,14,"span",[],null,null,null,null,null)),(l()(),t.Sa(1,0,null,null,13,"div",[["class","col-xs-12"],["formArrayName","inputTopics"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),t.Ra(2,212992,null,0,d.h,[[3,d.d],[8,null],[8,null]],{name:[0,"name"]},null),t.fb(2048,null,d.d,null,[d.h]),t.Ra(4,16384,null,0,d.u,[[4,d.d]],null,null),(l()(),t.Ja(16777216,null,null,1,null,$)),t.Ra(6,278528,null,0,g.j,[t.R,t.O,t.u],{ngForOf:[0,"ngForOf"]},null),(l()(),t.Sa(7,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),t.Sa(8,0,null,null,6,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.Sa(9,0,null,null,2,"div",[["class","col-xs-4"]],null,null,null,null,null)),(l()(),t.Sa(10,0,null,null,1,"button",[["class","btn btn-success"],["type","button"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onAddInputTopic()&&t),t},null,null)),(l()(),t.ib(-1,null,[" Add Input Topic"])),(l()(),t.Sa(12,0,null,null,2,"div",[["class","col-xs-4"]],null,null,null,null,null)),(l()(),t.Sa(13,0,null,null,1,"button",[["class","btn btn-success"],["title","Add from existing topics whith SUB permissions"],["type","button"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onShowTopicsChange(5)&&t),t},null,null)),(l()(),t.ib(-1,null,[" Add Existing Topics"]))],function(l,n){var e=n.component;l(n,2,0,"inputTopics"),l(n,6,0,e.getControls("inputTopics"))},function(l,n){l(n,1,0,t.bb(n,4).ngClassUntouched,t.bb(n,4).ngClassTouched,t.bb(n,4).ngClassPristine,t.bb(n,4).ngClassDirty,t.bb(n,4).ngClassValid,t.bb(n,4).ngClassInvalid,t.bb(n,4).ngClassPending)})}function L(l){return t.kb(0,[(l()(),t.Sa(0,0,null,null,7,"span",[],null,null,null,null,null)),(l()(),t.Sa(1,0,null,null,6,"div",[["class","col-xs-12"]],null,null,null,null,null)),(l()(),t.Sa(2,0,null,null,5,"div",[["class","col-xs-12"]],null,null,null,null,null)),(l()(),t.Sa(3,0,null,null,2,"p",[],null,null,null,null,null)),(l()(),t.Sa(4,0,null,null,1,"b",[],null,null,null,null,null)),(l()(),t.ib(-1,null,["Please select from the following topics:"])),(l()(),t.Sa(6,0,null,null,1,"app-topic-list",[],null,[[null,"topicSelected"]],function(l,n,e){var t=!0;return"topicSelected"===n&&(t=!1!==l.component.onAddExistingInputTopic(e)&&t),t},v.b,v.a)),t.Ra(7,245760,null,0,f.a,[s.o,s.a,h.n],{embeddingComponent:[0,"embeddingComponent"]},{topicSelected:"topicSelected"})],function(l,n){l(n,7,0,n.component.embeddingComponent)},null)}function M(l){return t.kb(0,[(l()(),t.Sa(0,0,null,null,5,"span",[],null,null,null,null,null)),(l()(),t.Sa(1,0,null,null,4,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.Ja(16777216,null,null,1,null,E)),t.Ra(3,16384,null,0,g.k,[t.R,t.O],{ngIf:[0,"ngIf"]},null),(l()(),t.Ja(16777216,null,null,1,null,L)),t.Ra(5,16384,null,0,g.k,[t.R,t.O],{ngIf:[0,"ngIf"]},null)],function(l,n){var e=n.component;l(n,3,0,!e.showTopicState.existing_inputs),l(n,5,0,e.showTopicState.existing_inputs)},null)}function N(l){return t.kb(0,[(l()(),t.Sa(0,0,null,null,3,"option",[],null,null,null,null,null)),t.Ra(1,147456,null,0,d.x,[t.l,t.F,[2,d.A]],{value:[0,"value"]},null),t.Ra(2,147456,null,0,d.G,[t.l,t.F,[8,null]],{value:[0,"value"]},null),(l()(),t.ib(3,null,["",""]))],function(l,n){l(n,1,0,n.context.$implicit),l(n,2,0,n.context.$implicit)},function(l,n){l(n,3,0,n.context.$implicit)})}function J(l){return t.kb(0,[(l()(),t.Sa(0,0,null,null,34,"div",[["class","row"],["style","margin-top: 10px;"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),t.Ra(1,212992,null,0,d.n,[[3,d.d],[8,null],[8,null]],{name:[0,"name"]},null),t.fb(2048,null,d.d,null,[d.n]),t.Ra(3,16384,null,0,d.u,[[4,d.d]],null,null),(l()(),t.Sa(4,0,null,null,6,"div",[["class","col-xs-2"]],null,null,null,null,null)),(l()(),t.Sa(5,0,null,null,5,"input",[["class","form-control"],["formControlName","name"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t.bb(l,6)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t.bb(l,6).onTouched()&&u),"compositionstart"===n&&(u=!1!==t.bb(l,6)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t.bb(l,6)._compositionEnd(e.target.value)&&u),u},null,null)),t.Ra(6,16384,null,0,d.e,[t.F,t.l,[2,d.a]],null,null),t.fb(1024,null,d.r,function(l){return[l]},[d.e]),t.Ra(8,671744,null,0,d.k,[[3,d.d],[8,null],[8,null],[6,d.r],[2,d.F]],{name:[0,"name"]},null),t.fb(2048,null,d.s,null,[d.k]),t.Ra(10,16384,null,0,d.t,[[4,d.s]],null,null),(l()(),t.Sa(11,0,null,null,6,"div",[["class","col-xs-6"]],null,null,null,null,null)),(l()(),t.Sa(12,0,null,null,5,"input",[["class","form-control"],["formControlName","description"],["rows","3"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t.bb(l,13)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t.bb(l,13).onTouched()&&u),"compositionstart"===n&&(u=!1!==t.bb(l,13)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t.bb(l,13)._compositionEnd(e.target.value)&&u),u},null,null)),t.Ra(13,16384,null,0,d.e,[t.F,t.l,[2,d.a]],null,null),t.fb(1024,null,d.r,function(l){return[l]},[d.e]),t.Ra(15,671744,null,0,d.k,[[3,d.d],[8,null],[8,null],[6,d.r],[2,d.F]],{name:[0,"name"]},null),t.fb(2048,null,d.s,null,[d.k]),t.Ra(17,16384,null,0,d.t,[[4,d.s]],null,null),(l()(),t.Sa(18,0,null,null,13,"div",[["class","col-xs-2"]],null,null,null,null,null)),(l()(),t.Sa(19,0,null,null,12,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.Sa(20,0,null,null,11,"select",[["class","form-control"],["formControlName","topic_ontology"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"focus"],[null,"change"],[null,"blur"]],function(l,n,e){var u=!0,i=l.component;return"change"===n&&(u=!1!==t.bb(l,21).onChange(e.target.value)&&u),"blur"===n&&(u=!1!==t.bb(l,21).onTouched()&&u),"focus"===n&&(u=!1!==i.topicOntologyOpened()&&u),u},null,null)),t.Ra(21,16384,null,0,d.A,[t.F,t.l],null,null),t.fb(1024,null,d.r,function(l){return[l]},[d.A]),t.Ra(23,671744,null,0,d.k,[[3,d.d],[8,null],[8,null],[6,d.r],[2,d.F]],{name:[0,"name"]},null),t.fb(2048,null,d.s,null,[d.k]),t.Ra(25,16384,null,0,d.t,[[4,d.s]],null,null),(l()(),t.Sa(26,0,null,null,3,"option",[["selected",""],["style","color: lightgray"],["value",""]],null,null,null,null,null)),t.Ra(27,147456,null,0,d.x,[t.l,t.F,[2,d.A]],{value:[0,"value"]},null),t.Ra(28,147456,null,0,d.G,[t.l,t.F,[8,null]],{value:[0,"value"]},null),(l()(),t.ib(-1,null,["no ontology selected"])),(l()(),t.Ja(16777216,null,null,1,null,N)),t.Ra(31,278528,null,0,g.j,[t.R,t.O,t.u],{ngForOf:[0,"ngForOf"]},null),(l()(),t.Sa(32,0,null,null,2,"div",[["class","col-xs-2"]],null,null,null,null,null)),(l()(),t.Sa(33,0,null,null,1,"button",[["class","btn btn-danger"],["type","button"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onDeleteOutputTopic(l.context.index)&&t),t},null,null)),(l()(),t.ib(-1,null,["X"]))],function(l,n){var e=n.component;l(n,1,0,n.context.index),l(n,8,0,"name"),l(n,15,0,"description"),l(n,23,0,"topic_ontology"),l(n,27,0,""),l(n,28,0,""),l(n,31,0,e.topicsOntology)},function(l,n){l(n,0,0,t.bb(n,3).ngClassUntouched,t.bb(n,3).ngClassTouched,t.bb(n,3).ngClassPristine,t.bb(n,3).ngClassDirty,t.bb(n,3).ngClassValid,t.bb(n,3).ngClassInvalid,t.bb(n,3).ngClassPending),l(n,5,0,t.bb(n,10).ngClassUntouched,t.bb(n,10).ngClassTouched,t.bb(n,10).ngClassPristine,t.bb(n,10).ngClassDirty,t.bb(n,10).ngClassValid,t.bb(n,10).ngClassInvalid,t.bb(n,10).ngClassPending),l(n,12,0,t.bb(n,17).ngClassUntouched,t.bb(n,17).ngClassTouched,t.bb(n,17).ngClassPristine,t.bb(n,17).ngClassDirty,t.bb(n,17).ngClassValid,t.bb(n,17).ngClassInvalid,t.bb(n,17).ngClassPending),l(n,20,0,t.bb(n,25).ngClassUntouched,t.bb(n,25).ngClassTouched,t.bb(n,25).ngClassPristine,t.bb(n,25).ngClassDirty,t.bb(n,25).ngClassValid,t.bb(n,25).ngClassInvalid,t.bb(n,25).ngClassPending)})}function q(l){return t.kb(0,[(l()(),t.Sa(0,0,null,null,12,"span",[],null,null,null,null,null)),(l()(),t.Sa(1,0,null,null,11,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.Sa(2,0,null,null,10,"div",[["class","col-xs-12"],["formArrayName","outputTopics"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),t.Ra(3,212992,null,0,d.h,[[3,d.d],[8,null],[8,null]],{name:[0,"name"]},null),t.fb(2048,null,d.d,null,[d.h]),t.Ra(5,16384,null,0,d.u,[[4,d.d]],null,null),(l()(),t.Ja(16777216,null,null,1,null,J)),t.Ra(7,278528,null,0,g.j,[t.R,t.O,t.u],{ngForOf:[0,"ngForOf"]},null),(l()(),t.Sa(8,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),t.Sa(9,0,null,null,3,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.Sa(10,0,null,null,2,"div",[["class","col-xs-12"]],null,null,null,null,null)),(l()(),t.Sa(11,0,null,null,1,"button",[["class","btn btn-success"],["type","button"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onAddOutputTopic()&&t),t},null,null)),(l()(),t.ib(-1,null,[" Add Output Topic"]))],function(l,n){var e=n.component;l(n,3,0,"outputTopics"),l(n,7,0,e.getControls("outputTopics"))},function(l,n){l(n,2,0,t.bb(n,5).ngClassUntouched,t.bb(n,5).ngClassTouched,t.bb(n,5).ngClassPristine,t.bb(n,5).ngClassDirty,t.bb(n,5).ngClassValid,t.bb(n,5).ngClassInvalid,t.bb(n,5).ngClassPending)})}function B(l){return t.kb(0,[(l()(),t.Sa(0,0,null,null,97,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.Sa(1,0,null,null,96,"div",[["class","col-xs-12"]],null,null,null,null,null)),(l()(),t.Sa(2,0,null,null,95,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(l,n,e){var u=!0,i=l.component;return"submit"===n&&(u=!1!==t.bb(l,4).onSubmit(e)&&u),"reset"===n&&(u=!1!==t.bb(l,4).onReset()&&u),"ngSubmit"===n&&(u=!1!==i.onSubmit()&&u),u},null,null)),t.Ra(3,16384,null,0,d.D,[],null,null),t.Ra(4,540672,null,0,d.m,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),t.fb(2048,null,d.d,null,[d.m]),t.Ra(6,16384,null,0,d.u,[[4,d.d]],null,null),(l()(),t.Sa(7,0,null,null,5,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.Sa(8,0,null,null,4,"div",[["class","col-xs-12"]],null,null,null,null,null)),(l()(),t.Sa(9,0,null,null,1,"button",[["class","btn btn-success"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(l()(),t.ib(-1,null,["Save"])),(l()(),t.Sa(11,0,null,null,1,"button",[["class","btn btn-danger"],["type","button"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onCancel()&&t),t},null,null)),(l()(),t.ib(-1,null,["Cancel"])),(l()(),t.Sa(13,0,null,null,10,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.Sa(14,0,null,null,9,"div",[["class","col-xs-12"]],null,null,null,null,null)),(l()(),t.Sa(15,0,null,null,8,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.Sa(16,0,null,null,1,"label",[["for","name"]],null,null,null,null,null)),(l()(),t.ib(-1,null,["Name"])),(l()(),t.Sa(18,0,null,null,5,"input",[["class","form-control"],["formControlName","name"],["id","name"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t.bb(l,19)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t.bb(l,19).onTouched()&&u),"compositionstart"===n&&(u=!1!==t.bb(l,19)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t.bb(l,19)._compositionEnd(e.target.value)&&u),u},null,null)),t.Ra(19,16384,null,0,d.e,[t.F,t.l,[2,d.a]],null,null),t.fb(1024,null,d.r,function(l){return[l]},[d.e]),t.Ra(21,671744,null,0,d.k,[[3,d.d],[8,null],[8,null],[6,d.r],[2,d.F]],{name:[0,"name"]},null),t.fb(2048,null,d.s,null,[d.k]),t.Ra(23,16384,null,0,d.t,[[4,d.s]],null,null),(l()(),t.Sa(24,0,null,null,10,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.Sa(25,0,null,null,9,"div",[["class","col-xs-12"]],null,null,null,null,null)),(l()(),t.Sa(26,0,null,null,8,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.Sa(27,0,null,null,1,"label",[["for","description"]],null,null,null,null,null)),(l()(),t.ib(-1,null,["Description"])),(l()(),t.Sa(29,0,null,null,5,"textarea",[["class","form-control"],["formControlName","description"],["id","name"],["rows","6"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t.bb(l,30)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t.bb(l,30).onTouched()&&u),"compositionstart"===n&&(u=!1!==t.bb(l,30)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t.bb(l,30)._compositionEnd(e.target.value)&&u),u},null,null)),t.Ra(30,16384,null,0,d.e,[t.F,t.l,[2,d.a]],null,null),t.fb(1024,null,d.r,function(l){return[l]},[d.e]),t.Ra(32,671744,null,0,d.k,[[3,d.d],[8,null],[8,null],[6,d.r],[2,d.F]],{name:[0,"name"]},null),t.fb(2048,null,d.s,null,[d.k]),t.Ra(34,16384,null,0,d.t,[[4,d.s]],null,null),(l()(),t.Sa(35,0,null,null,12,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.Sa(36,0,null,null,11,"div",[["class","col-xs-12"]],null,null,null,null,null)),(l()(),t.Sa(37,0,null,null,10,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.Sa(38,0,null,null,1,"label",[["for","serviceType"]],null,null,null,null,null)),(l()(),t.ib(-1,null,["ServiceType"])),(l()(),t.Sa(40,0,null,null,7,"select",[["class","form-control"],["formControlName","serviceType"],["id","serviceType"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,e){var u=!0;return"change"===n&&(u=!1!==t.bb(l,41).onChange(e.target.value)&&u),"blur"===n&&(u=!1!==t.bb(l,41).onTouched()&&u),u},null,null)),t.Ra(41,16384,null,0,d.A,[t.F,t.l],null,null),t.fb(1024,null,d.r,function(l){return[l]},[d.A]),t.Ra(43,671744,null,0,d.k,[[3,d.d],[8,null],[8,null],[6,d.r],[2,d.F]],{name:[0,"name"]},null),t.fb(2048,null,d.s,null,[d.k]),t.Ra(45,16384,null,0,d.t,[[4,d.s]],null,null),(l()(),t.Ja(16777216,null,null,1,null,D)),t.Ra(47,278528,null,0,g.j,[t.R,t.O,t.u],{ngForOf:[0,"ngForOf"]},null),(l()(),t.Sa(48,0,null,null,14,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.Sa(49,0,null,null,13,"div",[["class","col-xs-12"]],null,null,null,null,null)),(l()(),t.Sa(50,0,null,null,12,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.Sa(51,0,null,null,1,"label",[["for","serviceOntology"]],null,null,null,null,null)),(l()(),t.ib(-1,null,["ServiceOntology"])),(l()(),t.Sa(53,0,null,null,1,"button",[["class","btn"],["style","float: right"],["type","button"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.getOntology()&&t),t},null,null)),(l()(),t.ib(-1,null,["Refresh"])),(l()(),t.Sa(55,0,null,null,7,"select",[["class","form-control"],["formControlName","serviceOntology"],["id","serviceOntology"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"focus"],[null,"change"],[null,"blur"]],function(l,n,e){var u=!0,i=l.component;return"change"===n&&(u=!1!==t.bb(l,56).onChange(e.target.value)&&u),"blur"===n&&(u=!1!==t.bb(l,56).onTouched()&&u),"focus"===n&&(u=!1!==i.servicesOntologyOpened()&&u),u},null,null)),t.Ra(56,16384,null,0,d.A,[t.F,t.l],null,null),t.fb(1024,null,d.r,function(l){return[l]},[d.A]),t.Ra(58,671744,null,0,d.k,[[3,d.d],[8,null],[8,null],[6,d.r],[2,d.F]],{name:[0,"name"]},null),t.fb(2048,null,d.s,null,[d.k]),t.Ra(60,16384,null,0,d.t,[[4,d.s]],null,null),(l()(),t.Ja(16777216,null,null,1,null,U)),t.Ra(62,278528,null,0,g.j,[t.R,t.O,t.u],{ngForOf:[0,"ngForOf"]},null),(l()(),t.Sa(63,0,null,null,10,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.Sa(64,0,null,null,9,"div",[["class","col-xs-12"]],null,null,null,null,null)),(l()(),t.Sa(65,0,null,null,8,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t.Sa(66,0,null,null,1,"label",[["for","location"]],null,null,null,null,null)),(l()(),t.ib(-1,null,["Location"])),(l()(),t.Sa(68,0,null,null,5,"input",[["class","form-control"],["formControlName","location"],["id","location"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t.bb(l,69)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t.bb(l,69).onTouched()&&u),"compositionstart"===n&&(u=!1!==t.bb(l,69)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t.bb(l,69)._compositionEnd(e.target.value)&&u),u},null,null)),t.Ra(69,16384,null,0,d.e,[t.F,t.l,[2,d.a]],null,null),t.fb(1024,null,d.r,function(l){return[l]},[d.e]),t.Ra(71,671744,null,0,d.k,[[3,d.d],[8,null],[8,null],[6,d.r],[2,d.F]],{name:[0,"name"]},null),t.fb(2048,null,d.s,null,[d.k]),t.Ra(73,16384,null,0,d.t,[[4,d.s]],null,null),(l()(),t.Sa(74,0,null,null,19,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.Sa(75,0,null,null,18,"div",[["class","col-xs-12"]],null,null,null,null,null)),(l()(),t.Sa(76,0,null,null,17,"div",[["appDropdown",""],["class","btn-group"]],[[2,"open",null]],[["document","click"]],function(l,n,e){var u=!0;return"document:click"===n&&(u=!1!==t.bb(l,77).toggleOpen(e)&&u),u},null,null)),t.Ra(77,16384,null,0,m.a,[t.l],null,null),(l()(),t.Sa(78,0,null,null,2,"button",[["class","btn btn-primary dropdown-toggle"],["type","button"]],null,null,null,null,null)),(l()(),t.ib(-1,null,[" Add Topics "])),(l()(),t.Sa(80,0,null,null,0,"span",[["class","caret"]],null,null,null,null,null)),(l()(),t.Sa(81,0,null,null,12,"ul",[["class","dropdown-menu"]],null,null,null,null,null)),(l()(),t.Sa(82,0,null,null,2,"li",[],null,null,null,null,null)),(l()(),t.Sa(83,0,null,null,1,"a",[["style","cursor: pointer;"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onShowTopicsChange(1)&&t),t},null,null)),(l()(),t.ib(-1,null,["Input Topics"])),(l()(),t.Sa(85,0,null,null,2,"li",[],null,null,null,null,null)),(l()(),t.Sa(86,0,null,null,1,"a",[["style","cursor: pointer;"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onShowTopicsChange(2)&&t),t},null,null)),(l()(),t.ib(-1,null,["Output Topics"])),(l()(),t.Sa(88,0,null,null,2,"li",[],null,null,null,null,null)),(l()(),t.Sa(89,0,null,null,1,"a",[["style","cursor: pointer;"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onShowTopicsChange(3)&&t),t},null,null)),(l()(),t.ib(-1,null,["All Topics"])),(l()(),t.Sa(91,0,null,null,2,"li",[],null,null,null,null,null)),(l()(),t.Sa(92,0,null,null,1,"a",[["style","cursor: pointer;"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onShowTopicsChange(4)&&t),t},null,null)),(l()(),t.ib(-1,null,["Hide Topics"])),(l()(),t.Ja(16777216,null,null,1,null,M)),t.Ra(95,16384,null,0,g.k,[t.R,t.O],{ngIf:[0,"ngIf"]},null),(l()(),t.Ja(16777216,null,null,1,null,q)),t.Ra(97,16384,null,0,g.k,[t.R,t.O],{ngIf:[0,"ngIf"]},null)],function(l,n){var e=n.component;l(n,4,0,e.IoTServiceForm),l(n,21,0,"name"),l(n,32,0,"description"),l(n,43,0,"serviceType"),l(n,47,0,e.service_types),l(n,58,0,"serviceOntology"),l(n,62,0,e.serviceOntology),l(n,71,0,"location"),l(n,95,0,e.showTopicState.inputs),l(n,97,0,e.showTopicState.outputs)},function(l,n){var e=n.component;l(n,2,0,t.bb(n,6).ngClassUntouched,t.bb(n,6).ngClassTouched,t.bb(n,6).ngClassPristine,t.bb(n,6).ngClassDirty,t.bb(n,6).ngClassValid,t.bb(n,6).ngClassInvalid,t.bb(n,6).ngClassPending),l(n,9,0,!e.IoTServiceForm.valid),l(n,18,0,t.bb(n,23).ngClassUntouched,t.bb(n,23).ngClassTouched,t.bb(n,23).ngClassPristine,t.bb(n,23).ngClassDirty,t.bb(n,23).ngClassValid,t.bb(n,23).ngClassInvalid,t.bb(n,23).ngClassPending),l(n,29,0,t.bb(n,34).ngClassUntouched,t.bb(n,34).ngClassTouched,t.bb(n,34).ngClassPristine,t.bb(n,34).ngClassDirty,t.bb(n,34).ngClassValid,t.bb(n,34).ngClassInvalid,t.bb(n,34).ngClassPending),l(n,40,0,t.bb(n,45).ngClassUntouched,t.bb(n,45).ngClassTouched,t.bb(n,45).ngClassPristine,t.bb(n,45).ngClassDirty,t.bb(n,45).ngClassValid,t.bb(n,45).ngClassInvalid,t.bb(n,45).ngClassPending),l(n,55,0,t.bb(n,60).ngClassUntouched,t.bb(n,60).ngClassTouched,t.bb(n,60).ngClassPristine,t.bb(n,60).ngClassDirty,t.bb(n,60).ngClassValid,t.bb(n,60).ngClassInvalid,t.bb(n,60).ngClassPending),l(n,68,0,t.bb(n,73).ngClassUntouched,t.bb(n,73).ngClassTouched,t.bb(n,73).ngClassPristine,t.bb(n,73).ngClassDirty,t.bb(n,73).ngClassValid,t.bb(n,73).ngClassInvalid,t.bb(n,73).ngClassPending),l(n,76,0,t.bb(n,77).isOpen)})}var z,V=t.Oa("app-iot-service-new",P,function(l){return t.kb(0,[(l()(),t.Sa(0,0,null,null,1,"app-iot-service-new",[],null,null,null,B,F)),t.Ra(1,114688,null,0,P,[s.o,h.n],null,null)],function(l,n){l(n,1,0)},null)},{},{},[]),G=e("ADlX"),Q=e("pQLy");!function(l){l.UPLOAD_REQUEST="[File Upload Form] Request",l.UPLOAD_CANCEL="[File Upload Form] Cancel",l.UPLOAD_RESET="[File Upload Form] Reset",l.UPLOAD_STARTED="[File Upload API] Started",l.UPLOAD_PROGRESS="[File Upload API] Progress",l.UPLOAD_FAILURE="[File Upload API] Failure",l.UPLOAD_COMPLETED="[File Upload API] Success"}(z||(z={}));var H,K=function(){return function(l){this.payload=l,this.type=z.UPLOAD_REQUEST}}(),X=function(){return function(){this.type=z.UPLOAD_CANCEL}}(),Y=function(){return function(){this.type=z.UPLOAD_RESET}}(),Z=function(){return function(){this.type=z.UPLOAD_STARTED}}(),W=function(){return function(l){this.payload=l,this.type=z.UPLOAD_PROGRESS}}(),ll=function(){return function(l){this.payload=l,this.type=z.UPLOAD_FAILURE}}(),nl=function(){return function(){this.type=z.UPLOAD_COMPLETED}}();!function(l){l.Ready="Ready",l.Requested="Requested",l.Started="Started",l.Failed="Failed",l.Completed="Completed"}(H||(H={}));var el={status:H.Ready,error:null,progress:null},tl=Object(h.B)("uploadFile"),ul=Object(h.D)(tl,function(l){return l.error}),il=Object(h.D)(tl,function(l){return l.status===H.Ready}),ol=(Object(h.D)(tl,function(l){return l.status===H.Requested}),Object(h.D)(tl,function(l){return l.status===H.Started}),Object(h.D)(tl,function(l){return l.progress})),rl=Object(h.D)(tl,function(l){return l.status===H.Started&&l.progress>=0}),sl=Object(h.D)(tl,function(l){return l.status===H.Failed}),al=Object(h.D)(tl,function(l){return l.status===H.Completed}),cl=function(){function l(l){this.store$=l}return l.prototype.ngOnInit=function(){this.completed$=this.store$.pipe(Object(h.E)(al)),this.progress$=this.store$.pipe(Object(h.E)(ol)),this.error$=this.store$.pipe(Object(h.E)(ul)),this.isInProgress$=this.store$.pipe(Object(h.E)(rl)),this.isReady$=this.store$.pipe(Object(h.E)(il)),this.hasFailed$=this.store$.pipe(Object(h.E)(sl))},l.prototype.uploadFile=function(l){var n=l.target.files.item(0);this.store$.dispatch(new K({file:n,service_id:this.service_id})),l.srcElement.value=null},l.prototype.resetUpload=function(){this.store$.dispatch(new Y)},l.prototype.cancelUpload=function(){this.store$.dispatch(new X)},l}(),pl=t.Qa({encapsulation:0,styles:[[".message[_ngcontent-%COMP%]{margin-bottom:15px}.error[_ngcontent-%COMP%]{color:red}.btn-file[_ngcontent-%COMP%]{position:relative;overflow:hidden}.btn-file[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;top:0;right:0;min-width:100%;min-height:100%;font-size:100px;text-align:right;filter:alpha(opacity=0);opacity:0;outline:0;background:#fff;cursor:inherit;display:block}"]],data:{}});function bl(l){return t.kb(0,[(l()(),t.Sa(0,0,null,null,3,"div",[["class","message"]],null,null,null,null,null)),(l()(),t.Sa(1,0,null,null,2,"label",[["class","btn btn-default btn-file"]],null,null,null,null,null)),(l()(),t.ib(-1,null,[" Upload service files "])),(l()(),t.Sa(3,0,[["file",1]],null,0,"input",[["class","form-control"],["multiple",""],["type","file"]],null,[[null,"change"]],function(l,n,e){var t=!0;return"change"===n&&(t=!1!==l.component.uploadFile(e)&&t),t},null,null))],null,null)}function dl(l){return t.kb(0,[(l()(),t.Sa(0,0,null,null,6,"div",[["class","message"]],null,null,null,null,null)),(l()(),t.Sa(1,0,null,null,2,"label",[["class","btn btn-default btn-file"]],null,null,null,null,null)),(l()(),t.Sa(2,0,null,null,1,"button",[],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.cancelUpload()&&t),t},null,null)),(l()(),t.ib(-1,null,["Cancel Upload"])),(l()(),t.Sa(4,0,null,null,2,"div",[["style","margin-bottom: 14px;"]],null,null,null,null,null)),(l()(),t.ib(5,null,["Uploading... ","%"])),t.db(131072,g.b,[t.i])],null,function(l,n){var e=n.component;l(n,5,0,t.jb(n,5,0,t.bb(n,6).transform(e.progress$)))})}function gl(l){return t.kb(0,[(l()(),t.Ja(16777216,null,null,4,null,bl)),t.Ra(1,16384,null,0,g.k,[t.R,t.O],{ngIf:[0,"ngIf"]},null),t.db(131072,g.b,[t.i]),t.db(131072,g.b,[t.i]),t.db(131072,g.b,[t.i]),(l()(),t.Ja(16777216,null,null,2,null,dl)),t.Ra(6,16384,null,0,g.k,[t.R,t.O],{ngIf:[0,"ngIf"]},null),t.db(131072,g.b,[t.i])],function(l,n){var e=n.component;l(n,1,0,t.jb(n,1,0,t.bb(n,2).transform(e.isReady$))||t.jb(n,1,0,t.bb(n,3).transform(e.hasFailed$))||t.jb(n,1,0,t.bb(n,4).transform(e.completed$))),l(n,6,0,t.jb(n,6,0,t.bb(n,7).transform(e.isInProgress$)))},null)}var vl=e("mrSG"),fl=e("nkY7"),hl=e("isby"),ml=e("MGBS"),yl=e("zotm"),Ol=e("IUTb"),Sl={};function jl(){for(var l=[],n=0;n<arguments.length;n++)l[n]=arguments[n];var e=null,t=null;return Object(fl.a)(l[l.length-1])&&(t=l.pop()),"function"==typeof l[l.length-1]&&(e=l.pop()),1===l.length&&Object(hl.a)(l[0])&&(l=l[0]),Object(Ol.a)(l,t).lift(new Cl(e))}var Cl=function(){function l(l){this.resultSelector=l}return l.prototype.call=function(l,n){return n.subscribe(new xl(l,this.resultSelector))},l}(),xl=function(l){function n(n,e){var t=l.call(this,n)||this;return t.resultSelector=e,t.active=0,t.values=[],t.observables=[],t}return vl.c(n,l),n.prototype._next=function(l){this.values.push(Sl),this.observables.push(l)},n.prototype._complete=function(){var l=this.observables,n=l.length;if(0===n)this.destination.complete();else{this.active=n,this.toRespond=n;for(var e=0;e<n;e++){var t=l[e];this.add(Object(yl.a)(this,t,t,e))}}},n.prototype.notifyComplete=function(l){0==(this.active-=1)&&this.destination.complete()},n.prototype.notifyNext=function(l,n,e,t,u){var i=this.values,o=this.toRespond?i[e]===Sl?--this.toRespond:this.toRespond:0;i[e]=n,0===o&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))},n.prototype._tryResultSelector=function(l){var n;try{n=this.resultSelector.apply(this,l)}catch(l){return void this.destination.error(l)}this.destination.next(n)},n}(ml.a),wl=e("K9Ia"),kl=e("ny24"),_l=function(){function l(l){this.store=l,this.pageEmitter$=new wl.a,this.ngUnsubscribe=new wl.a,this.startIndex=0,this.pageLength=8,this.columnHeaders=["name","description","service file","build Image","password","run params","status","start/stop"]}return l.prototype.ngOnInit=function(){var l=this;this.store.dispatch(new S.s),this.serviceState$=this.store.pipe(Object(h.E)(k)),jl(this.serviceState$,this.pageEmitter$).pipe(Object(kl.a)(this.ngUnsubscribe)).subscribe(function(n){var e=n[0],t=n[1];l.servicesLength=e.length,t?l.startIndex<l.servicesLength-l.pageLength&&(l.startIndex+=l.pageLength):l.startIndex>l.pageLength?l.startIndex-=l.pageLength:l.startIndex=0,l.pagedServices=e.slice(l.startIndex,l.startIndex+l.pageLength)}),this.pageEmitter$.next(!1),this.loading$=this.store.pipe(Object(h.E)(T))},l.prototype.ngOnDestroy=function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()},l.prototype.setPage=function(l){this.pageEmitter$.next(l)},l.prototype.onToggleService=function(l,n,e,t){this.store.dispatch(n?new S.M({service_id:l,password:e,run_params:t}):new S.O({service_id:l}))},l.prototype.onItemSelected=function(l){this.store.dispatch(new S.q({service_id:l.id}))},l.prototype.onBuildImage=function(l){this.store.dispatch(new S.c({service_id:l}))},l}(),Tl=t.Qa({encapsulation:0,styles:[['.btn-file[_ngcontent-%COMP%]{position:relative;overflow:hidden}.btn-file[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;top:0;right:0;min-width:100%;min-height:100%;font-size:100px;text-align:right;filter:alpha(opacity=0);opacity:0;outline:0;background:#fff;cursor:inherit;display:block}table[_ngcontent-%COMP%]{width:100%}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:60px;height:34px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;transition:.4s}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:26px;width:26px;left:4px;bottom:4px;background-color:#fff;transition:.4s}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#2196f3}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px #2196f3}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{-webkit-transform:translateX(26px);transform:translateX(26px)}.slider.round[_ngcontent-%COMP%]{border-radius:34px}.slider.round[_ngcontent-%COMP%]:before{border-radius:50%}.wrapper[_ngcontent-%COMP%]{width:100%;height:100%}.overlay[_ngcontent-%COMP%]{position:absolute;z-index:1002;background-color:rgba(255,255,255,.5);width:100%;height:100%}.spinner-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;justify-items:center}']],data:{}});function Rl(l){return t.kb(0,[(l()(),t.Sa(0,0,null,null,2,"div",[["class","overlay"]],null,null,null,null,null)),(l()(),t.Sa(1,0,null,null,1,"app-loading-spinner",[],null,null,null,G.b,G.a)),t.Ra(2,49152,null,0,Q.a,[],null,null)],null,null)}function Il(l){return t.kb(0,[(l()(),t.Sa(0,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.ib(1,null,[" "," "]))],null,function(l,n){l(n,1,0,n.context.$implicit)})}function Pl(l){return t.kb(0,[(l()(),t.Sa(0,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),t.ib(-1,null,["Running"]))],null,null)}function Fl(l){return t.kb(0,[(l()(),t.ib(-1,null,["Not running"]))],null,null)}function Dl(l){return t.kb(0,[(l()(),t.Sa(0,0,null,null,22,"tr",[],null,null,null,null,null)),(l()(),t.Sa(1,0,null,null,1,"td",[["width","10%"]],null,null,null,null,null)),(l()(),t.ib(2,null,["",""])),(l()(),t.Sa(3,0,null,null,1,"td",[["width","25%"]],null,null,null,null,null)),(l()(),t.ib(4,null,["",""])),(l()(),t.Sa(5,0,null,null,2,"td",[["title","Dockerfile, service code file, etc."],["width","10%"]],null,null,null,null,null)),(l()(),t.Sa(6,0,null,null,1,"app-upload-file",[],null,null,null,gl,pl)),t.Ra(7,114688,null,0,cl,[h.n],{service_id:[0,"service_id"]},null),(l()(),t.Sa(8,0,null,null,2,"td",[["width","10%"]],null,null,null,null,null)),(l()(),t.Sa(9,0,null,null,1,"button",[["class","btn btn-primary"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onBuildImage(l.context.$implicit.id)&&t),t},null,null)),(l()(),t.ib(-1,null,["Build Image"])),(l()(),t.Sa(11,0,null,null,1,"td",[["width","10%"]],null,null,null,null,null)),(l()(),t.Sa(12,0,[["password",1]],null,0,"input",[["class","form-control"],["id","password"],["type","password"]],[[8,"disabled",0]],null,null,null,null)),(l()(),t.Sa(13,0,null,null,1,"td",[["width","15%"]],null,null,null,null,null)),(l()(),t.Sa(14,0,[["runparameters",1]],null,0,"input",[["class","form-control"],["id","runparameters"],["type","text"]],[[8,"disabled",0]],null,null,null,null)),(l()(),t.Sa(15,0,null,null,3,"td",[["style","cursor: pointer;"],["title","Double click to get latest service logs"],["width","10%"]],null,[[null,"dblclick"]],function(l,n,e){var t=!0;return"dblclick"===n&&(t=!1!==l.component.onItemSelected(l.context.$implicit)&&t),t},null,null)),(l()(),t.Ja(16777216,null,null,1,null,Pl)),t.Ra(17,16384,null,0,g.k,[t.R,t.O],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(l()(),t.Ja(0,[["textServiceNotRunning",2]],null,0,null,Fl)),(l()(),t.Sa(19,0,null,null,3,"td",[["title","Disabled if image is not succesfully built first"],["width","10%"]],null,null,null,null,null)),(l()(),t.Sa(20,0,null,null,2,"label",[["class","switch"]],null,null,null,null,null)),(l()(),t.Sa(21,0,null,null,0,"input",[["type","checkbox"]],[[8,"checked",0],[8,"disabled",0]],[[null,"change"]],function(l,n,e){var u=!0;return"change"===n&&(u=!1!==l.component.onToggleService(l.context.$implicit.id,!l.context.$implicit.service_is_running,t.bb(l,12).value,t.bb(l,14).value)&&u),u},null,null)),(l()(),t.Sa(22,0,null,null,0,"span",[["class","slider round"]],null,null,null,null,null))],function(l,n){l(n,7,0,n.context.$implicit.id),l(n,17,0,n.context.$implicit.service_is_running,t.bb(n,18))},function(l,n){l(n,2,0,n.context.$implicit.name),l(n,4,0,n.context.$implicit.description),l(n,12,0,n.context.$implicit.service_is_running),l(n,14,0,n.context.$implicit.service_is_running),l(n,21,0,n.context.$implicit.service_is_running,!n.context.$implicit.service_image_built)})}function Ul(l){return t.kb(0,[(l()(),t.Sa(0,0,null,null,5,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.Sa(1,0,null,null,4,"div",[["class","col-xs-12"]],null,null,null,null,null)),(l()(),t.Sa(2,0,null,null,1,"button",[["class","btn btn-primary btn-space"],["type","button"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.setPage(!1)&&t),t},null,null)),(l()(),t.ib(-1,null,["Previous Page"])),(l()(),t.Sa(4,0,null,null,1,"button",[["class","btn btn-primary btn-space"],["type","button"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.setPage(!0)&&t),t},null,null)),(l()(),t.ib(-1,null,["Next Page"]))],null,null)}function Al(l){return t.kb(0,[(l()(),t.Sa(0,0,null,null,13,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.Sa(1,0,null,null,12,"div",[["class","wrapper"]],null,null,null,null,null)),(l()(),t.Ja(16777216,null,null,2,null,Rl)),t.Ra(3,16384,null,0,g.k,[t.R,t.O],{ngIf:[0,"ngIf"]},null),t.db(131072,g.b,[t.i]),(l()(),t.Sa(5,0,null,null,8,"div",[["class","col-xs-12"]],null,null,null,null,null)),(l()(),t.Sa(6,0,null,null,7,"table",[["class","table table-striped table-hover table-bordered"]],null,null,null,null,null)),(l()(),t.Sa(7,0,null,null,3,"thead",[["class","thead-dark"]],null,null,null,null,null)),(l()(),t.Sa(8,0,null,null,2,"tr",[],null,null,null,null,null)),(l()(),t.Ja(16777216,null,null,1,null,Il)),t.Ra(10,278528,null,0,g.j,[t.R,t.O,t.u],{ngForOf:[0,"ngForOf"]},null),(l()(),t.Sa(11,0,null,null,2,"tbody",[],null,null,null,null,null)),(l()(),t.Ja(16777216,null,null,1,null,Dl)),t.Ra(13,278528,null,0,g.j,[t.R,t.O,t.u],{ngForOf:[0,"ngForOf"]},null),(l()(),t.Ja(16777216,null,null,1,null,Ul)),t.Ra(15,16384,null,0,g.k,[t.R,t.O],{ngIf:[0,"ngIf"]},null)],function(l,n){var e=n.component;l(n,3,0,t.jb(n,3,0,t.bb(n,4).transform(e.loading$))),l(n,10,0,e.columnHeaders),l(n,13,0,e.pagedServices),l(n,15,0,e.servicesLength>e.pageLength)},null)}var $l=t.Oa("app-service-management",_l,function(l){return t.kb(0,[(l()(),t.Sa(0,0,null,null,1,"app-service-management",[],null,null,null,Al,Tl)),t.Ra(1,245760,null,0,_l,[h.n],null,null)],function(l,n){l(n,1,0)},null)},{},{},[]),El=e("Qu3t"),Ll=e("9H8w"),Ml=function(){function l(){}return l.prototype.ngOnInit=function(){},l}(),Nl=t.Qa({encapsulation:0,styles:[[".author[_ngcontent-%COMP%]{background-color:#9ecaff;height:30px;width:110px;border-radius:20px;margin-top:10px;float:right}.ex[_ngcontent-%COMP%]{margin-left:10%;font-weight:300}.separator[_ngcontent-%COMP%]{margin-top:10px;border:1px solid #c3c3c3}.title[_ngcontent-%COMP%]{margin:0;padding:0 0 10px;color:#a9a9a9;font-size:26px;font-weight:700}.description[_ngcontent-%COMP%]{color:#e74c3c;padding:0 0 20px;font-size:14px;line-height:1.8em}.meta[_ngcontent-%COMP%]{color:gray;font-weight:500}.service__card[_ngcontent-%COMP%]{box-shadow:0 0 2rem rgba(0,0,255,.1);justify-items:center;padding:2rem;margin:2rem;cursor:pointer;background-color:#fff;border-radius:1.75rem;-webkit-animation:1.25s ease-in-out fadein;animation:1.25s ease-in-out fadein}.service-name__text[_ngcontent-%COMP%]{text-transform:uppercase;font-size:1.4rem;letter-spacing:.1rem;margin-bottom:1rem}"]],data:{}});function Jl(l){return t.kb(0,[(l()(),t.Sa(0,0,null,null,17,"section",[["class","service__card"]],null,null,null,null,null)),(l()(),t.Sa(1,0,null,null,16,"a",[["class","list-group-item clearfix"],["routerLinkActive","active"],["style","margin-top: 2px;"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,e){var u=!0;return"click"===n&&(u=!1!==t.bb(l,2).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&u),u},null,null)),t.Ra(2,671744,[[2,4]],0,s.q,[s.o,s.a,g.h],{routerLink:[0,"routerLink"]},null),t.cb(3,1),t.Ra(4,1720320,null,2,s.p,[s.o,t.l,t.F,t.i],{routerLinkActive:[0,"routerLinkActive"]},null),t.gb(603979776,1,{links:1}),t.gb(603979776,2,{linksWithHrefs:1}),(l()(),t.Sa(7,0,null,null,10,"div",[],null,null,null,null,null)),(l()(),t.Sa(8,0,null,null,1,"h4",[["class","list-group-item-heading service-name__text"]],null,null,null,null,null)),(l()(),t.ib(9,null,["",""])),(l()(),t.Sa(10,0,null,null,0,"div",[["class","separator"]],null,null,null,null,null)),(l()(),t.Sa(11,0,null,null,1,"p",[["class","list-group-item-text description"]],null,null,null,null,null)),(l()(),t.ib(12,null,["",""])),(l()(),t.Sa(13,0,null,null,1,"p",[["class","list-group-item-text meta"]],null,null,null,null,null)),(l()(),t.ib(14,null,["Located at: ",""])),(l()(),t.Sa(15,0,null,null,2,"div",[["class","author"]],null,null,null,null,null)),(l()(),t.Sa(16,0,null,null,1,"p",[["class","ex"]],null,null,null,null,null)),(l()(),t.ib(17,null,["by ",""]))],function(l,n){l(n,2,0,l(n,3,0,n.component.iot_service.id)),l(n,4,0,"active")},function(l,n){var e=n.component;l(n,1,0,t.bb(n,2).target,t.bb(n,2).href),l(n,9,0,e.iot_service.name),l(n,12,0,e.iot_service.description),l(n,14,0,e.iot_service.location),l(n,17,0,e.iot_service.owner)})}var ql=function(){function l(l){this.store=l,this.pageEmitter$=new wl.a,this.ngUnsubscribe=new wl.a,this.startIndex=0,this.pageLength=9}return l.prototype.ngOnInit=function(){var l=this;this.store.dispatch(new S.l),this.serviceState$=this.store.pipe(Object(h.E)(k)),jl(this.serviceState$,this.pageEmitter$).pipe(Object(kl.a)(this.ngUnsubscribe)).subscribe(function(n){var e=n[0],t=n[1];l.servicesLength=e.length,t?l.startIndex<l.servicesLength-l.pageLength&&(l.startIndex+=l.pageLength):l.startIndex>l.pageLength?l.startIndex-=l.pageLength:l.startIndex=0,l.startIndex>e.length&&(l.startIndex=0),l.pagedServices=e.slice(l.startIndex,l.startIndex+l.pageLength)}),this.pageEmitter$.next(!1)},l.prototype.ngOnDestroy=function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()},l.prototype.setPage=function(l){this.pageEmitter$.next(l)},l}(),Bl=t.Qa({encapsulation:0,styles:[[".btn-space[_ngcontent-%COMP%]{margin:15px}.fixed-size[_ngcontent-%COMP%]{min-height:500px;height:100%}.rounded[_ngcontent-%COMP%]{border-radius:25px}.root__container[_ngcontent-%COMP%]{display:-ms-grid;display:grid;-ms-grid-columns:auto auto auto;grid-template-columns:auto auto auto;-ms-grid-rows:auto auto auto;grid-template-rows:auto auto auto;position:relative}"]],data:{}});function zl(l){return t.kb(0,[(l()(),t.Sa(0,0,null,null,1,"app-iot-service-item",[],null,null,null,Jl,Nl)),t.Ra(1,114688,null,0,Ml,[],{iot_service:[0,"iot_service"]},null)],function(l,n){l(n,1,0,n.context.$implicit)},null)}function Vl(l){return t.kb(0,[(l()(),t.Sa(0,0,null,null,5,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.Sa(1,0,null,null,4,"div",[["class","col-xs-12"]],null,null,null,null,null)),(l()(),t.Sa(2,0,null,null,1,"button",[["class","btn btn-primary btn-space"],["type","button"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.setPage(!1)&&t),t},null,null)),(l()(),t.ib(-1,null,["Previous Page"])),(l()(),t.Sa(4,0,null,null,1,"button",[["class","btn btn-primary btn-space"],["type","button"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.setPage(!0)&&t),t},null,null)),(l()(),t.ib(-1,null,["Next Page"]))],null,null)}function Gl(l){return t.kb(0,[(l()(),t.Sa(0,0,null,null,3,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.Sa(1,0,null,null,2,"div",[["class","col-xs-12 fixed-size root__container"]],null,null,null,null,null)),(l()(),t.Ja(16777216,null,null,1,null,zl)),t.Ra(3,278528,null,0,g.j,[t.R,t.O,t.u],{ngForOf:[0,"ngForOf"]},null),(l()(),t.Ja(16777216,null,null,1,null,Vl)),t.Ra(5,16384,null,0,g.k,[t.R,t.O],{ngIf:[0,"ngIf"]},null)],function(l,n){var e=n.component;l(n,3,0,e.pagedServices),l(n,5,0,e.servicesLength>e.pageLength)},null)}var Ql=function(){function l(l,n,e){this.router=l,this.route=n,this.store=e,this.searchType="service"}return l.prototype.ngOnInit=function(){this.ontologyOpened()},l.prototype.ontologyOpened=function(){var l=this;this.store.pipe(Object(h.E)(_),Object(O.a)(1),Object(y.a)(function(l){return l.sort()})).subscribe(function(n){l.serviceOntology=n,0===l.serviceOntology.length&&l.store.dispatch(new S.r)})},l.prototype.onSelectOntology=function(){this.store.dispatch(new S.l(this.selectedOntology))},l.prototype.onNewIoTService=function(){this.router.navigate(["new"],{relativeTo:this.route})},l}(),Hl=t.Qa({encapsulation:0,styles:[[""]],data:{}});function Kl(l){return t.kb(0,[(l()(),t.Sa(0,0,null,null,3,"option",[],null,null,null,null,null)),t.Ra(1,147456,null,0,d.x,[t.l,t.F,[2,d.A]],{value:[0,"value"]},null),t.Ra(2,147456,null,0,d.G,[t.l,t.F,[8,null]],{value:[0,"value"]},null),(l()(),t.ib(3,null,["",""]))],function(l,n){l(n,1,0,n.context.$implicit),l(n,2,0,n.context.$implicit)},function(l,n){l(n,3,0,n.context.$implicit)})}function Xl(l){return t.kb(0,[(l()(),t.Sa(0,0,null,null,20,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.Sa(1,0,null,null,3,"div",[["class","col-xs-5"]],null,null,null,null,null)),(l()(),t.Sa(2,0,null,null,1,"app-search",[],null,null,null,El.b,El.a)),t.Ra(3,638976,null,0,Ll.a,[h.n],{searchType:[0,"searchType"]},null),(l()(),t.Sa(4,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),t.Sa(5,0,null,null,12,"div",[["class","col-xs-5"]],null,null,null,null,null)),(l()(),t.Sa(6,0,null,null,11,"select",[["class","form-control"],["id","serviceOntology"],["title","Filter by Ontology"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"focus"],[null,"change"],[null,"blur"]],function(l,n,e){var u=!0,i=l.component;return"change"===n&&(u=!1!==t.bb(l,7).onChange(e.target.value)&&u),"blur"===n&&(u=!1!==t.bb(l,7).onTouched()&&u),"ngModelChange"===n&&(u=!1!==(i.selectedOntology=e)&&u),"focus"===n&&(u=!1!==i.ontologyOpened()&&u),"change"===n&&(u=!1!==i.onSelectOntology()&&u),u},null,null)),t.Ra(7,16384,null,0,d.A,[t.F,t.l],null,null),t.fb(1024,null,d.r,function(l){return[l]},[d.A]),t.Ra(9,671744,null,0,d.w,[[8,null],[8,null],[8,null],[6,d.r]],{model:[0,"model"]},{update:"ngModelChange"}),t.fb(2048,null,d.s,null,[d.w]),t.Ra(11,16384,null,0,d.t,[[4,d.s]],null,null),(l()(),t.Sa(12,0,null,null,3,"option",[["selected",""],["style","color: lightgray"],["value",""]],null,null,null,null,null)),t.Ra(13,147456,null,0,d.x,[t.l,t.F,[2,d.A]],{value:[0,"value"]},null),t.Ra(14,147456,null,0,d.G,[t.l,t.F,[8,null]],{value:[0,"value"]},null),(l()(),t.ib(-1,null,["no ontology selected"])),(l()(),t.Ja(16777216,null,null,1,null,Kl)),t.Ra(17,278528,null,0,g.j,[t.R,t.O,t.u],{ngForOf:[0,"ngForOf"]},null),(l()(),t.Sa(18,0,null,null,2,"div",[["class","col-xs-2"]],null,null,null,null,null)),(l()(),t.Sa(19,0,null,null,1,"button",[["class","btn btn-success"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onNewIoTService()&&t),t},null,null)),(l()(),t.ib(-1,null,["New Service"])),(l()(),t.Sa(21,0,null,null,2,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.Sa(22,0,null,null,1,"app-iot-service-list",[],null,null,null,Gl,Bl)),t.Ra(23,245760,null,0,ql,[h.n],null,null)],function(l,n){var e=n.component;l(n,3,0,e.searchType),l(n,9,0,e.selectedOntology),l(n,13,0,""),l(n,14,0,""),l(n,17,0,e.serviceOntology),l(n,23,0)},function(l,n){l(n,6,0,t.bb(n,11).ngClassUntouched,t.bb(n,11).ngClassTouched,t.bb(n,11).ngClassPristine,t.bb(n,11).ngClassDirty,t.bb(n,11).ngClassValid,t.bb(n,11).ngClassInvalid,t.bb(n,11).ngClassPending)})}var Yl=t.Oa("app-iot-service-list-container",Ql,function(l){return t.kb(0,[(l()(),t.Sa(0,0,null,null,1,"app-iot-service-list-container",[],null,null,null,Xl,Hl)),t.Ra(1,114688,null,0,Ql,[s.o,s.a,h.n],null,null)],function(l,n){l(n,1,0)},null)},{},{},[]),Zl=e("xDLc"),Wl=e("oqBR"),ln=e("FR+V"),nn=function(){function l(l,n,e){this.router=l,this.route=n,this.store=e,this.termsAccepted=!1,this.ngUnsubscribe=new wl.a,this.showTopicState={inputs:!0,outputs:!0},this.service_owner=!1,this.confirmDelete=!1,this.confirmMessage="Really delete service?"}return l.prototype.ngOnInit=function(){var l=this;this.route.params.subscribe(function(n){l.termsAccepted=!1,l.store.dispatch(new S.L(+n.id))}),this.store.pipe(Object(h.E)(ln.b),Object(O.a)(1)).subscribe(function(n){l.current_user=n.username}),this.store.pipe(Object(h.E)("services"),Object(kl.a)(this.ngUnsubscribe)).subscribe(function(n){l.detailedIoTService=n.selectedService,l.detailedIoTService&&(l.permissionsText=l.detailedIoTService.subscriber?"Service subscription enabled.":"Accept terms of use in order to request service subscription.",l.service_owner=l.current_user===l.detailedIoTService.owner)})},l.prototype.ngOnDestroy=function(){this.showTopicState={inputs:!1,outputs:!1},this.ngUnsubscribe.next(),this.ngUnsubscribe.complete(),this.store.dispatch(new S.N)},l.prototype.onShowTopicsChange=function(l){switch(l){case 1:this.showTopicState={inputs:!0,outputs:!1};break;case 2:this.showTopicState={inputs:!1,outputs:!0};break;case 3:this.showTopicState={inputs:!0,outputs:!0};break;case 4:this.showTopicState={inputs:!1,outputs:!1}}},l.prototype.onNavigateToTopic=function(l){this.router.navigate(["/topics/",l])},l.prototype.r_btnState=function(){return this.termsAccepted},l.prototype.requestIoTService=function(){this.store.dispatch(new S.A(this.detailedIoTService.id))},l.prototype.onDeleteService=function(){this.confirmDelete=!0},l.prototype.onConfirmDelete=function(l){l&&this.store.dispatch(new S.h(this.detailedIoTService.id)),this.confirmDelete=!1},l.prototype.onEditService=function(){},l}(),en=t.Qa({encapsulation:0,styles:[["body[_ngcontent-%COMP%]{font-family:Nunito,sans-serif;padding:50px}.card[_ngcontent-%COMP%]{border-radius:4px;background:#fff;box-shadow:0 6px 10px rgba(0,0,0,.08),0 0 6px rgba(0,0,0,.05);transition:.3s transform cubic-bezier(.155,1.105,.295,1.12),.3s box-shadow,.3s -webkit-transform cubic-bezier(.155,1.105,.295,1.12);padding:14px 80px 18px 36px;cursor:pointer}.separator[_ngcontent-%COMP%]{margin-top:10px;border:1px solid #c3c3c3}.card[_ngcontent-%COMP%]:hover{-webkit-transform:scale(1.05);transform:scale(1.05);box-shadow:0 10px 20px rgba(0,0,0,.12),0 4px 8px rgba(0,0,0,.06)}.card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600}.card[_ngcontent-%COMP%]   .topics[_ngcontent-%COMP%]{background:#d3d3d3;border-radius:.3em;padding:5px}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;top:20px;right:15px;max-height:120px}.card[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#e74c3c;padding:0 0 20px;font-size:14px;line-height:1.8em}.card[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{color:gray;font-weight:500}.permissions[_ngcontent-%COMP%]{border-style:inset;border-color:#d3d3d3;border-radius:.3em;padding:5px}.card-2[_ngcontent-%COMP%]{background-image:url(/assets/service_detail.jpg);background-repeat:no-repeat;background-position:right;background-size:80px}.card-1[_ngcontent-%COMP%]{background-image:url(https://ionicframework.com/img/getting-started/ionic-native-card.png);background-repeat:no-repeat;background-position:right;background-size:80px}.card-3[_ngcontent-%COMP%]{background-image:url(https://ionicframework.com/img/getting-started/components-card.png);background-repeat:no-repeat;background-position:right;background-size:80px}@media(max-width:990px){.card[_ngcontent-%COMP%]{margin:20px}}"]],data:{}});function tn(l){return t.kb(0,[(l()(),t.Sa(0,0,null,null,1,"app-alert-overlay",[],null,[[null,"close"]],function(l,n,e){var t=!0;return"close"===n&&(t=!1!==l.component.onConfirmDelete(e)&&t),t},Zl.b,Zl.a)),t.Ra(1,49152,null,0,Wl.a,[],{message:[0,"message"]},{close:"close"})],function(l,n){l(n,1,0,n.component.confirmMessage)},null)}function un(l){return t.kb(0,[(l()(),t.Sa(0,0,null,null,13,"div",[["class","row"],["style","float: right"]],null,null,null,null,null)),(l()(),t.Sa(1,0,null,null,12,"div",[["class","col-xs-12"]],null,null,null,null,null)),(l()(),t.Sa(2,0,null,null,11,"div",[["appDropdown",""],["class","btn-group"]],[[2,"open",null]],[["document","click"]],function(l,n,e){var u=!0;return"document:click"===n&&(u=!1!==t.bb(l,3).toggleOpen(e)&&u),u},null,null)),t.Ra(3,16384,null,0,m.a,[t.l],null,null),(l()(),t.Sa(4,0,null,null,2,"button",[["class","btn btn-primary dropdown-toggle"],["type","button"]],null,null,null,null,null)),(l()(),t.ib(-1,null,[" Manage Service "])),(l()(),t.Sa(6,0,null,null,0,"span",[["class","caret"]],null,null,null,null,null)),(l()(),t.Sa(7,0,null,null,6,"ul",[["class","dropdown-menu"]],null,null,null,null,null)),(l()(),t.Sa(8,0,null,null,2,"li",[],null,null,null,null,null)),(l()(),t.Sa(9,0,null,null,1,"a",[["style","cursor: pointer;"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onEditService()&&t),t},null,null)),(l()(),t.ib(-1,null,["Edit Service"])),(l()(),t.Sa(11,0,null,null,2,"li",[],null,null,null,null,null)),(l()(),t.Sa(12,0,null,null,1,"a",[["style","cursor: pointer;"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onDeleteService()&&t),t},null,null)),(l()(),t.ib(-1,null,["Delete Service"]))],null,function(l,n){l(n,2,0,t.bb(n,3).isOpen)})}function on(l){return t.kb(0,[(l()(),t.Sa(0,0,null,null,1,"li",[["class","list-group-item form-control"],["style","cursor: pointer; margin-top: 2px;"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onNavigateToTopic(l.context.$implicit.id)&&t),t},null,null)),(l()(),t.ib(1,null,[" "," - "," "]))],null,function(l,n){l(n,1,0,n.context.$implicit.name,n.context.$implicit.description)})}function rn(l){return t.kb(0,[(l()(),t.Sa(0,0,null,null,7,"div",[["style","margin-top:5px;"]],null,null,null,null,null)),(l()(),t.Sa(1,0,null,null,1,"p",[["class","topics"]],null,null,null,null,null)),(l()(),t.ib(-1,null,["Subscribed to the following (Input) topics"])),(l()(),t.Sa(3,0,null,null,4,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.Sa(4,0,null,null,3,"div",[["class","col-xs-12"]],null,null,null,null,null)),(l()(),t.Sa(5,0,null,null,2,"ul",[["class","list-group"]],null,null,null,null,null)),(l()(),t.Ja(16777216,null,null,1,null,on)),t.Ra(7,278528,null,0,g.j,[t.R,t.O,t.u],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,7,0,n.component.detailedIoTService.input_topics)},null)}function sn(l){return t.kb(0,[(l()(),t.Sa(0,0,null,null,1,"li",[["class","list-group-item form-control"],["style","cursor: pointer; margin-top: 2px;"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onNavigateToTopic(l.context.$implicit.id)&&t),t},null,null)),(l()(),t.ib(1,null,[" "," - "," "]))],null,function(l,n){l(n,1,0,n.context.$implicit.name,n.context.$implicit.description)})}function an(l){return t.kb(0,[(l()(),t.Sa(0,0,null,null,7,"span",[["style","margin-top:5px;"]],null,null,null,null,null)),(l()(),t.Sa(1,0,null,null,1,"p",[["class","topics"]],null,null,null,null,null)),(l()(),t.ib(-1,null,["Publishing to the following (Output) Topics"])),(l()(),t.Sa(3,0,null,null,4,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.Sa(4,0,null,null,3,"div",[["class","col-xs-12"]],null,null,null,null,null)),(l()(),t.Sa(5,0,null,null,2,"ul",[["class","list-group"]],null,null,null,null,null)),(l()(),t.Ja(16777216,null,null,1,null,sn)),t.Ra(7,278528,null,0,g.j,[t.R,t.O,t.u],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,7,0,n.component.detailedIoTService.output_topics)},null)}function cn(l){return t.kb(0,[(l()(),t.Sa(0,0,null,null,11,"span",[],null,null,null,null,null)),(l()(),t.Sa(1,0,null,null,1,"button",[["class","btn btn-success"]],[[8,"disabled",0]],[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.requestIoTService()&&t),t},null,null)),(l()(),t.ib(-1,null,["Request!"])),(l()(),t.Sa(3,0,null,null,8,"form",[["class","form-inline"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,e){var u=!0;return"submit"===n&&(u=!1!==t.bb(l,5).onSubmit(e)&&u),"reset"===n&&(u=!1!==t.bb(l,5).onReset()&&u),u},null,null)),t.Ra(4,16384,null,0,d.D,[],null,null),t.Ra(5,4210688,null,0,d.v,[[8,null],[8,null]],null,null),t.fb(2048,null,d.d,null,[d.v]),t.Ra(7,16384,null,0,d.u,[[4,d.d]],null,null),(l()(),t.Sa(8,0,null,null,3,"div",[["class","checkbox-inline"]],null,null,null,null,null)),(l()(),t.Sa(9,0,null,null,2,"label",[["id","agree-label"]],null,null,null,null,null)),(l()(),t.Sa(10,0,null,null,0,"input",[["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(l,n,e){var t=!0,u=l.component;return"change"===n&&(t=0!=(u.termsAccepted=!u.termsAccepted)&&t),t},null,null)),(l()(),t.ib(-1,null,["I accept the terms of use "]))],null,function(l,n){var e=n.component;l(n,1,0,!e.r_btnState()),l(n,3,0,t.bb(n,7).ngClassUntouched,t.bb(n,7).ngClassTouched,t.bb(n,7).ngClassPristine,t.bb(n,7).ngClassDirty,t.bb(n,7).ngClassValid,t.bb(n,7).ngClassInvalid,t.bb(n,7).ngClassPending),l(n,10,0,e.termsAccepted)})}function pn(l){return t.kb(0,[(l()(),t.Sa(0,0,null,null,57,"div",[["class","card card-2"]],null,null,null,null,null)),(l()(),t.Ja(16777216,null,null,1,null,un)),t.Ra(2,16384,null,0,g.k,[t.R,t.O],{ngIf:[0,"ngIf"]},null),(l()(),t.Sa(3,0,null,null,3,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.Sa(4,0,null,null,2,"div",[["class","col-xs-12"]],null,null,null,null,null)),(l()(),t.Sa(5,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),t.ib(6,null,["",""])),(l()(),t.Sa(7,0,null,null,0,"div",[["class","separator"]],null,null,null,null,null)),(l()(),t.Sa(8,0,null,null,3,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.Sa(9,0,null,null,2,"div",[["class","col-xs-12"]],null,null,null,null,null)),(l()(),t.Sa(10,0,null,null,1,"h4",[["class","description"]],null,null,null,null,null)),(l()(),t.ib(11,null,["",""])),(l()(),t.Sa(12,0,null,null,7,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.Sa(13,0,null,null,6,"div",[["class","col-xs-12"]],null,null,null,null,null)),(l()(),t.Sa(14,0,null,null,5,"p",[["class","meta"]],null,null,null,null,null)),(l()(),t.Sa(15,0,null,null,1,"b",[],null,null,null,null,null)),(l()(),t.ib(16,null,["",""])),(l()(),t.ib(-1,null,[" service, located at "])),(l()(),t.Sa(18,0,null,null,1,"b",[],null,null,null,null,null)),(l()(),t.ib(19,null,["",""])),(l()(),t.Sa(20,0,null,null,7,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.Sa(21,0,null,null,6,"div",[["class","col-xs-12"]],null,null,null,null,null)),(l()(),t.Sa(22,0,null,null,5,"p",[["class","meta"]],null,null,null,null,null)),(l()(),t.Sa(23,0,null,null,1,"b",[],null,null,null,null,null)),(l()(),t.ib(-1,null,["Service Ontology"])),(l()(),t.ib(-1,null,[": "])),(l()(),t.Sa(26,0,null,null,1,"b",[],null,null,null,null,null)),(l()(),t.ib(27,null,["",""])),(l()(),t.Sa(28,0,null,null,19,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.Sa(29,0,null,null,18,"div",[["class","col-xs-12"]],null,null,null,null,null)),(l()(),t.Sa(30,0,null,null,17,"div",[["appDropdown",""],["class","btn-group"]],[[2,"open",null]],[["document","click"]],function(l,n,e){var u=!0;return"document:click"===n&&(u=!1!==t.bb(l,31).toggleOpen(e)&&u),u},null,null)),t.Ra(31,16384,null,0,m.a,[t.l],null,null),(l()(),t.Sa(32,0,null,null,2,"button",[["class","btn btn-primary dropdown-toggle"],["type","button"]],null,null,null,null,null)),(l()(),t.ib(-1,null,[" Connected Topics "])),(l()(),t.Sa(34,0,null,null,0,"span",[["class","caret"]],null,null,null,null,null)),(l()(),t.Sa(35,0,null,null,12,"ul",[["class","dropdown-menu"]],null,null,null,null,null)),(l()(),t.Sa(36,0,null,null,2,"li",[],null,null,null,null,null)),(l()(),t.Sa(37,0,null,null,1,"a",[["style","cursor: pointer;"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onShowTopicsChange(1)&&t),t},null,null)),(l()(),t.ib(-1,null,["Input Topics"])),(l()(),t.Sa(39,0,null,null,2,"li",[],null,null,null,null,null)),(l()(),t.Sa(40,0,null,null,1,"a",[["style","cursor: pointer;"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onShowTopicsChange(2)&&t),t},null,null)),(l()(),t.ib(-1,null,["Output Topics"])),(l()(),t.Sa(42,0,null,null,2,"li",[],null,null,null,null,null)),(l()(),t.Sa(43,0,null,null,1,"a",[["style","cursor: pointer;"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onShowTopicsChange(3)&&t),t},null,null)),(l()(),t.ib(-1,null,["All Topics"])),(l()(),t.Sa(45,0,null,null,2,"li",[],null,null,null,null,null)),(l()(),t.Sa(46,0,null,null,1,"a",[["style","cursor: pointer;"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onShowTopicsChange(4)&&t),t},null,null)),(l()(),t.ib(-1,null,["Hide Topics"])),(l()(),t.Ja(16777216,null,null,1,null,rn)),t.Ra(49,16384,null,0,g.k,[t.R,t.O],{ngIf:[0,"ngIf"]},null),(l()(),t.Ja(16777216,null,null,1,null,an)),t.Ra(51,16384,null,0,g.k,[t.R,t.O],{ngIf:[0,"ngIf"]},null),(l()(),t.Sa(52,0,null,null,3,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.Sa(53,0,null,null,2,"div",[["class","col-xs-12"]],null,null,null,null,null)),(l()(),t.Sa(54,0,null,null,1,"label",[],[[4,"color",null]],null,null,null,null)),(l()(),t.ib(55,null,["",""])),(l()(),t.Ja(16777216,null,null,1,null,cn)),t.Ra(57,16384,null,0,g.k,[t.R,t.O],{ngIf:[0,"ngIf"]},null)],function(l,n){var e=n.component;l(n,2,0,e.service_owner),l(n,49,0,e.showTopicState.inputs),l(n,51,0,e.showTopicState.outputs),l(n,57,0,!e.detailedIoTService.subscriber)},function(l,n){var e=n.component;l(n,6,0,e.detailedIoTService.name),l(n,11,0,e.detailedIoTService.description),l(n,16,0,e.detailedIoTService.service_type),l(n,19,0,e.detailedIoTService.location),l(n,27,0,e.detailedIoTService.service_ontology),l(n,30,0,t.bb(n,31).isOpen),l(n,54,0,e.detailedIoTService.subscriber?"green":"red"),l(n,55,0,e.permissionsText)})}function bn(l){return t.kb(0,[(l()(),t.Sa(0,0,null,null,4,"div",[],null,null,null,null,null)),(l()(),t.Ja(16777216,null,null,1,null,tn)),t.Ra(2,16384,null,0,g.k,[t.R,t.O],{ngIf:[0,"ngIf"]},null),(l()(),t.Ja(16777216,null,null,1,null,pn)),t.Ra(4,16384,null,0,g.k,[t.R,t.O],{ngIf:[0,"ngIf"]},null)],function(l,n){var e=n.component;l(n,2,0,e.confirmDelete),l(n,4,0,e.detailedIoTService)},null)}var dn=t.Oa("app-iot-service-detail",nn,function(l){return t.kb(0,[(l()(),t.Sa(0,0,null,null,1,"app-iot-service-detail",[],null,null,null,bn,en)),t.Ra(1,245760,null,0,nn,[s.o,s.a,h.n],null,null)],function(l,n){l(n,1,0)},null)},{},{},[]),gn=e("r7Ki"),vn=e("/zDd"),fn=e("2+9F"),hn=e("OTVi"),mn=e("wywh"),yn=e("t/Na"),On=e("6epW"),Sn=e("PCNd"),jn=e("Yj9t"),Cn=function(){},xn=e("tKkJ"),wn=e("eC6N"),kn=function(){return(kn=Object.assign||function(l){for(var n,e=1,t=arguments.length;e<t;e++)for(var u in n=arguments[e])Object.prototype.hasOwnProperty.call(n,u)&&(l[u]=n[u]);return l}).apply(this,arguments)};function _n(l,n){switch(void 0===l&&(l=el),n.type){case z.UPLOAD_REQUEST:return kn({},l,{status:H.Requested,progress:null,error:null});case z.UPLOAD_CANCEL:case z.UPLOAD_RESET:return kn({},l,{status:H.Ready,progress:null,error:null});case z.UPLOAD_FAILURE:return kn({},l,{status:H.Failed,error:n.payload.error,progress:null});case z.UPLOAD_STARTED:return kn({},l,{status:H.Started,progress:0});case z.UPLOAD_PROGRESS:return kn({},l,{progress:n.payload.progress});case z.UPLOAD_COMPLETED:return kn({},l,{status:H.Completed,progress:100,error:null});default:return l}}var Tn=e("jYNz"),Rn=e("6blF"),In=e("F/XL"),Pn=e("Phjn"),Fn=e("9Z1F"),Dn=e("xMyE"),Un=e("/PH2"),An=function(){function l(l,n,e,t){var u=this;this.fileUploadService=l,this.actions$=n,this.store=e,this.alertService=t,this.uploadRequestEffect$=this.actions$.pipe(Object(Tn.d)(z.UPLOAD_REQUEST),Object(y.a)(function(l){return l}),Object(Un.a)(this.store.select("auth")),Object(Pn.a)(function(l){var n=l[0];return u.fileUploadService.uploadFile(l[1].userData.id,n.payload.service_id,n.payload.file).pipe(Object(y.a)(function(l){return u.getActionFromHttpEvent(l)}),Object(Fn.a)(function(l){return Object(In.a)(u.handleError(l))}),Object(kl.a)(u.actions$.pipe(Object(Tn.d)(z.UPLOAD_CANCEL))))})),this.uploadCancelEffect=this.actions$.pipe(Object(Tn.d)(z.UPLOAD_CANCEL),Object(y.a)(function(l){return l}),Object(y.a)(function(l){return new ll({error:"Upload file Canceled"})})),this.failed=this.actions$.pipe(Object(Tn.d)(z.UPLOAD_FAILURE),Object(Dn.a)(function(l){u.alertService.error(l.payload.error)})),this.success=this.actions$.pipe(Object(Tn.d)(z.UPLOAD_COMPLETED),Object(Dn.a)(function(l){u.alertService.success("File Successfully Uploaded")}))}return l.prototype.getActionFromHttpEvent=function(l){switch(l.type){case yn.g.Sent:return new Z;case yn.g.UploadProgress:return new W({progress:Math.round(100*l.loaded/l.total)});case yn.g.ResponseHeader:case yn.g.Response:return 200===l.status||201===l.status?new nl:new ll({error:l.statusText});case yn.g.DownloadProgress:return new W({progress:Math.round(100*l.loaded/l.total)});default:return new ll({error:"Unknown Event: "+JSON.stringify(l)})}},l.prototype.handleError=function(l){return new ll({error:l.message})},Object(vl.b)([Object(Tn.b)(),Object(vl.d)("design:type",Rn.a)],l.prototype,"uploadRequestEffect$",void 0),Object(vl.b)([Object(Tn.b)(),Object(vl.d)("design:type",Rn.a)],l.prototype,"uploadCancelEffect",void 0),Object(vl.b)([Object(Tn.b)({dispatch:!1}),Object(vl.d)("design:type",Object)],l.prototype,"failed",void 0),Object(vl.b)([Object(Tn.b)({dispatch:!1}),Object(vl.d)("design:type",Object)],l.prototype,"success",void 0),l}(),$n=e("XlPw"),En=e("AytR"),Ln=function(){function l(l){this.httpClient=l,this.url=En.a.apiUrl}return l.prototype.uploadFile=function(l,n,e){var t=new FormData;t.append("service_file",e,e.name);var u=new yn.i("POST",this.url+"users/"+l+"/services/"+n+"/uploads",t,{reportProgress:!0,observe:"body"});return this.httpClient.request(u).pipe(Object(Fn.a)(function(l){return Object($n.a)(l.error)}))},l.ngInjectableDef=t.V({factory:function(){return new l(t.Z(yn.c))},token:l,providedIn:"root"}),l}(),Mn=e("aFAB"),Nn=function(){function l(l){this.httpClient=l,this.url=En.a.apiUrl}return l.prototype.getIoTServices=function(l){return this.httpClient.get(this.url+"services"+l,{observe:"body",responseType:"json"}).pipe(Object(Fn.a)(function(l){return Object($n.a)(l.error)}))},l.prototype.getUserService=function(l,n){return this.httpClient.get(this.url+"users/"+l+"/services/"+n,{observe:"body",responseType:"json"}).pipe(Object(Fn.a)(function(l){return Object($n.a)(l.error)}))},l.prototype.requestUserService=function(l,n){return this.httpClient.put(this.url+"users/"+l+"/services/"+n,{},{observe:"body",responseType:"json"}).pipe(Object(Fn.a)(function(l){return Object($n.a)(l.error)}))},l.prototype.createIoTService=function(l){return this.httpClient.post(this.url+"services",l,{observe:"body",responseType:"json"}).pipe(Object(Fn.a)(function(l){return Object($n.a)(l.error)}))},l.prototype.deleteIoTService=function(l){return this.httpClient.delete(this.url+"services/"+l,{observe:"body",responseType:"json"}).pipe(Object(Fn.a)(function(l){return Object($n.a)(l.error)}))},l.prototype.getIoTOwnedServices=function(l){return this.httpClient.get(this.url+"users/"+l+"/services/ownership",{observe:"body",responseType:"json"}).pipe(Object(Fn.a)(function(l){return Object($n.a)(l.error)}))},l.prototype.startService=function(l,n,e,t){return this.httpClient.post(this.url+"users/"+l+"/services/"+n+"/status",{password:e,run_params:t},{observe:"body",responseType:"json"}).pipe(Object(Fn.a)(function(l){return Object($n.a)(l.error)}))},l.prototype.stopService=function(l,n){return this.httpClient.delete(this.url+"users/"+l+"/services/"+n+"/status",{observe:"body",responseType:"json"}).pipe(Object(Fn.a)(function(l){return Object($n.a)(l.error)}))},l.prototype.getServiceStatus=function(l,n){return this.httpClient.get(this.url+"users/"+l+"/services/"+n+"/status",{observe:"body",responseType:"json"}).pipe(Object(Fn.a)(function(l){return Object($n.a)(l.error)}))},l.prototype.exportUserServices=function(l){return this.httpClient.get(this.url+"users/"+l+"/exportServices",{responseType:"blob"}).pipe(Object(Fn.a)(function(l){return Object($n.a)(l.error)}))},l.prototype.importUserServices=function(l,n){return this.httpClient.post(this.url+"users/"+l+"/exportServices",n,{observe:"body",responseType:"json"}).pipe(Object(Fn.a)(function(l){return Object($n.a)(l.error)}))},l.prototype.getServiceLogFile=function(l,n){return this.httpClient.get(this.url+"users/"+l+"/services/"+n+"/logFile",{responseType:"blob"}).pipe(Object(Fn.a)(function(l){return Object($n.a)(JSON.stringify(l.error))}))},l.prototype.getServicesOntology=function(){return this.httpClient.get(this.url+"services/ontology",{observe:"body",responseType:"json"}).pipe(Object(Fn.a)(function(l){return Object($n.a)(l.error)}))},l.prototype.buildServiceDockerImage=function(l,n){return this.httpClient.post(this.url+"users/"+l+"/services/"+n+"/dockerImage",null,{observe:"body",responseType:"json"}).pipe(Object(Fn.a)(function(l){return Object($n.a)(l.error)}))},l}(),Jn=e("15JJ"),qn=e("psW0"),Bn=function(){function l(l,n,e,t,u){var i=this;this.actions$=l,this.service=n,this.store=e,this.alertService=t,this.router=u,this.url=En.a.apiUrl,this.servicesFetch=this.actions$.pipe(Object(Tn.d)(S.k),Object(Un.a)(this.store.select("auth")),Object(Jn.a)(function(l){var n=l[0];return i.service.getIoTServices(n.payload?"?term="+n.payload:"").pipe(Object(qn.a)(function(l){return[{type:S.C,payload:l},{type:S.x,payload:{message:"Successfully retrieved all services",redirectUrl:"/services"}}]}),Object(Fn.a)(function(l){return Object(In.a)({type:S.w,payload:l})}))})),this.startSelectService=this.actions$.pipe(Object(Tn.d)(S.E),Object(y.a)(function(l){return l.payload}),Object(Un.a)(this.store.select("auth")),Object(Jn.a)(function(l){return i.service.getUserService(l[1].userData.id,l[0]).pipe(Object(qn.a)(function(l){return[{type:S.B,payload:l},{type:S.x,payload:{message:"Successfully retrieved selected service",redirectUrl:"/services"}}]}),Object(Fn.a)(function(l){return Object(In.a)({type:S.w,payload:l})}))})),this.requestIoTService=this.actions$.pipe(Object(Tn.d)(S.z),Object(y.a)(function(l){return l.payload}),Object(Un.a)(this.store.select("auth")),Object(Jn.a)(function(l){return i.service.requestUserService(l[1].userData.id,l[0]).pipe(Object(qn.a)(function(l){return[{type:S.I,payload:l},{type:S.x,payload:{message:"Successfully subscribed to Service!"}}]}),Object(Fn.a)(function(l){return Object(In.a)({type:S.w,payload:l})}))})),this.createIoTService=this.actions$.pipe(Object(Tn.d)(S.e),Object(y.a)(function(l){return l.payload}),Object(Jn.a)(function(l){return i.service.createIoTService(l).pipe(Object(qn.a)(function(l){return[{type:S.G,payload:l},{type:S.x,payload:{message:"Successfully created Service!"}},{type:S.y,payload:"services/"+l.id}]}),Object(Fn.a)(function(l){return Object(In.a)({type:S.w,payload:l})}))})),this.deleteIoTService=this.actions$.pipe(Object(Tn.d)(S.g),Object(y.a)(function(l){return l.payload}),Object(Un.a)(this.store.select("auth")),Object(Jn.a)(function(l){var n=l[0];return i.service.deleteIoTService(n).pipe(Object(qn.a)(function(l){return[{type:S.H,payload:n},{type:S.y,payload:"services"},{type:S.x,payload:{message:l.message}}]}),Object(Fn.a)(function(l){return Object(In.a)({type:S.w,payload:l})}))})),this.userServicesFetch=this.actions$.pipe(Object(Tn.d)(S.p),Object(y.a)(function(l){return l}),Object(Un.a)(this.store.select("auth")),Object(Jn.a)(function(l){return i.service.getIoTOwnedServices(l[1].userData.id).pipe(Object(qn.a)(function(l){return[{type:S.C,payload:l},{type:S.x,payload:{message:"Retrieved User Owned Services to manage"}}]}),Object(Fn.a)(function(l){return Object(In.a)({type:S.w,payload:l})}))})),this.StartTService=this.actions$.pipe(Object(Tn.d)(S.F),Object(y.a)(function(l){return l.payload}),Object(Un.a)(this.store.select("auth")),Object(Jn.a)(function(l){var n=l[0];return i.service.startService(l[1].userData.id,n.service_id,n.password,n.run_params).pipe(Object(qn.a)(function(l){return[{type:S.P,payload:{service_id:n.service_id,status:!0}},{type:S.x,payload:{message:"Service started"}}]}),Object(Fn.a)(function(l){return Object(In.a)({type:S.w,payload:l},{type:S.P,payload:{service_id:n.service_id,status:!1}})}))})),this.StopService=this.actions$.pipe(Object(Tn.d)(S.K),Object(y.a)(function(l){return l.payload}),Object(Un.a)(this.store.select("auth")),Object(Jn.a)(function(l){var n=l[0];return i.service.stopService(l[1].userData.id,n.service_id).pipe(Object(qn.a)(function(l){return[{type:S.x,payload:{message:"Service stoped."}},{type:S.P,payload:{service_id:n.service_id,status:!1}}]}),Object(Fn.a)(function(l){return Object(In.a)({type:S.w,payload:l})}))})),this.GetServiceStatus=this.actions$.pipe(Object(Tn.d)(S.o),Object(y.a)(function(l){return l.payload}),Object(Un.a)(this.store.select("auth")),Object(Jn.a)(function(l){var n=l[0];return i.service.getServiceStatus(l[1].userData.id,n.service_id).pipe(Object(qn.a)(function(l){var e="Failed to start service";return l&&(e="Service running"),[{type:S.P,payload:{service_id:n.service_id,status:l}},{type:S.x,payload:{message:e}}]}),Object(Fn.a)(function(l){return Object(In.a)({type:S.w,payload:l})}))})),this.exportUserServices=this.actions$.pipe(Object(Tn.d)(S.i),Object(Un.a)(this.store.select("auth")),Object(Jn.a)(function(l){var n=l[1];return i.service.exportUserServices(n.userData.id).pipe(Object(qn.a)(function(l){var e=new Blob([l]),t=window.URL.createObjectURL(e),u=document.createElement("a");return document.body.appendChild(u),u.setAttribute("style","display: none"),u.href=t,u.download=n.userData.username+"_services_export.json",u.click(),window.URL.revokeObjectURL(t),u.remove(),[{type:S.x,payload:{message:"Services Exported"}}]}),Object(Fn.a)(function(l){return Object(In.a)({type:S.w,payload:{message:"Failed to download file."}})}))})),this.importServicesFile=this.actions$.pipe(Object(Tn.d)(S.t),Object(y.a)(function(l){return l.payload}),Object(Un.a)(this.store.select("auth")),Object(Jn.a)(function(l){return i.service.importUserServices(l[1].userData.id,l[0].uploadData).pipe(Object(qn.a)(function(l){return[{type:S.x,payload:{message:"Services successfully imported"}}]}),Object(Fn.a)(function(l){return Object(In.a)({type:S.w,payload:l})}))})),this.getServiceLogFile=this.actions$.pipe(Object(Tn.d)(S.m),Object(y.a)(function(l){return l.payload}),Object(Un.a)(this.store.select("auth")),Object(Jn.a)(function(l){var n=l[0];return i.service.getServiceLogFile(l[1].userData.id,n.service_id).pipe(Object(qn.a)(function(l){var e=new Blob([l]),t=window.URL.createObjectURL(e),u=document.createElement("a");return document.body.appendChild(u),u.setAttribute("style","display: none"),u.href=t,u.download=n.service_id+".log",u.click(),window.URL.revokeObjectURL(t),u.remove(),[{type:S.x,payload:{message:"Service log file downloaded"}}]}),Object(Fn.a)(function(l){return Object(In.a)({type:S.w,payload:{message:"Failed to get latest service log file. Have you run service at least once first?"}})}))})),this.buildDockerImage=this.actions$.pipe(Object(Tn.d)(S.a),Object(y.a)(function(l){return l.payload}),Object(Un.a)(this.store.select("auth")),Object(Jn.a)(function(l){var n=l[0];return i.service.buildServiceDockerImage(l[1].userData.id,n.service_id).pipe(Object(qn.a)(function(l){return[{type:S.b,payload:{service_id:l,success:!0}},{type:S.v},{type:S.x,payload:{message:"Service Docker Image Built"}}]}),Object(Fn.a)(function(l){return Object(In.a)({type:S.b,payload:{service_id:n.service_id,success:!1}},{type:S.v},{type:S.w,payload:l})}))})),this.getServiceOntology=this.actions$.pipe(Object(Tn.d)(S.n),Object(Jn.a)(function(l){return i.service.getServicesOntology().pipe(Object(qn.a)(function(l){return[{type:S.D,payload:l.data},{type:S.x,payload:{message:"Retrieved services ontology"}}]}),Object(Fn.a)(function(l){return Object(In.a)({type:S.w,payload:l})}))})),this.failed=this.actions$.pipe(Object(Tn.d)(S.w),Object(Dn.a)(function(l){i.alertService.error(l.payload.message)})),this.success=this.actions$.pipe(Object(Tn.d)(S.x),Object(Dn.a)(function(l){i.alertService.success(l.payload.message)})),this.redirect=this.actions$.pipe(Object(Tn.d)(S.y),Object(Dn.a)(function(l){i.router.navigate([l.payload])}))}return Object(vl.b)([Object(Tn.b)(),Object(vl.d)("design:type",Object)],l.prototype,"servicesFetch",void 0),Object(vl.b)([Object(Tn.b)(),Object(vl.d)("design:type",Object)],l.prototype,"startSelectService",void 0),Object(vl.b)([Object(Tn.b)(),Object(vl.d)("design:type",Object)],l.prototype,"requestIoTService",void 0),Object(vl.b)([Object(Tn.b)(),Object(vl.d)("design:type",Object)],l.prototype,"createIoTService",void 0),Object(vl.b)([Object(Tn.b)(),Object(vl.d)("design:type",Object)],l.prototype,"deleteIoTService",void 0),Object(vl.b)([Object(Tn.b)(),Object(vl.d)("design:type",Object)],l.prototype,"userServicesFetch",void 0),Object(vl.b)([Object(Tn.b)(),Object(vl.d)("design:type",Object)],l.prototype,"StartTService",void 0),Object(vl.b)([Object(Tn.b)(),Object(vl.d)("design:type",Object)],l.prototype,"StopService",void 0),Object(vl.b)([Object(Tn.b)(),Object(vl.d)("design:type",Object)],l.prototype,"GetServiceStatus",void 0),Object(vl.b)([Object(Tn.b)(),Object(vl.d)("design:type",Object)],l.prototype,"exportUserServices",void 0),Object(vl.b)([Object(Tn.b)(),Object(vl.d)("design:type",Object)],l.prototype,"importServicesFile",void 0),Object(vl.b)([Object(Tn.b)(),Object(vl.d)("design:type",Object)],l.prototype,"getServiceLogFile",void 0),Object(vl.b)([Object(Tn.b)(),Object(vl.d)("design:type",Object)],l.prototype,"buildDockerImage",void 0),Object(vl.b)([Object(Tn.b)(),Object(vl.d)("design:type",Object)],l.prototype,"getServiceOntology",void 0),Object(vl.b)([Object(Tn.b)({dispatch:!1}),Object(vl.d)("design:type",Object)],l.prototype,"failed",void 0),Object(vl.b)([Object(Tn.b)({dispatch:!1}),Object(vl.d)("design:type",Object)],l.prototype,"success",void 0),Object(vl.b)([Object(Tn.b)({dispatch:!1}),Object(vl.d)("design:type",Object)],l.prototype,"redirect",void 0),l}(),zn=function(){},Vn=e("SBxm"),Gn=e("5Fl7"),Qn=e("x5lK"),Hn=e("aJah"),Kn=e("dyu5");e.d(n,"IotServicesModuleNgFactory",function(){return Xn});var Xn=t.Pa(u,[],function(l){return t.Za([t.ab(512,t.k,t.Ea,[[8,[i.a,o.a,r.a,b,V,$l,Yl,dn,gn.a,vn.a,fn.a]],[3,t.k],t.z]),t.ab(4608,g.m,g.l,[t.w,[2,g.s]]),t.ab(4608,d.E,d.E,[]),t.ab(4608,d.i,d.i,[]),t.ab(4608,hn.a,hn.a,[h.n,s.o]),t.ab(4608,mn.a,mn.a,[yn.c]),t.ab(1073742336,g.c,g.c,[]),t.ab(1073742336,d.C,d.C,[]),t.ab(1073742336,d.o,d.o,[]),t.ab(1073742336,d.y,d.y,[]),t.ab(1073742336,s.r,s.r,[[2,s.y],[2,s.o]]),t.ab(1073742336,On.a,On.a,[]),t.ab(1073742336,Sn.a,Sn.a,[]),t.ab(1073742336,jn.a,jn.a,[]),t.ab(1073742336,Cn,Cn,[]),t.ab(1073742336,xn.a,xn.a,[]),t.ab(1073742336,wn.a,wn.a,[]),t.ab(1024,h.j,function(){return[{key:"uploadFile",reducerFactory:h.z,metaReducers:[],initialState:void 0},{key:"services",reducerFactory:h.z,metaReducers:[],initialState:void 0}]},[]),t.ab(1024,h.q,function(){return[_n,x]},[]),t.ab(1024,h.r,function(l,n){return[l,n]},[h.q,h.q]),t.ab(1024,h.b,function(l,n,e,t,u,i){return[h.w(l,n,e),h.w(t,u,i)]},[t.s,h.q,h.r,t.s,h.q,h.r]),t.ab(1073873408,h.o,h.o,[h.j,h.b,h.g,h.p]),t.ab(512,An,An,[Ln,Tn.a,h.n,Mn.a]),t.ab(512,Nn,Nn,[yn.c]),t.ab(512,Bn,Bn,[Tn.a,Nn,h.n,Mn.a,s.o]),t.ab(1024,Tn.i,function(l,n){return[Tn.e(l),Tn.e(n)]},[An,Bn]),t.ab(1073742336,Tn.g,Tn.g,[Tn.f,Tn.i,[2,h.p],[2,h.o]]),t.ab(1073742336,zn,zn,[]),t.ab(1073742336,u,u,[]),t.ab(1024,s.m,function(){return[[{path:"signup",component:Vn.a},{path:"signin",component:Gn.a}],[{path:"",component:a,children:[{path:"new",component:P,canActivate:[hn.a]},{path:"management",component:_l,canActivate:[hn.a],children:[]},{path:"",component:Ql},{path:":id",component:nn,canActivate:[hn.a]}]}],[{path:"topics",component:Qn.a,canActivate:[hn.a],children:[{path:"",component:Hn.a},{path:":id",component:Kn.a}]}]]},[])])})}}]);